% preamble20160607.sty
%
% author: Stephan BÃ¶hme
%
% collection of all packages, macros, etc to compile example.tex in the context-example git repository
%
% use: \usepackage[option1,option2=value2,...]{preamble20160607}

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{preamble20171016}[2017/01/04]

\RequirePackage{kvoptions}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Declaration of options                                                               %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\SetupKeyvalOptions{family=pre,prefix=pre@}

\DeclareBoolOption[true]{etoolbox}
\DeclareBoolOption[false]{koma}
\DeclareBoolOption[false]{oldtikz}
\DeclareBoolOption[false]{ownenv}
\DeclareBoolOption[false]{beamer}
\DeclareBoolOption[false]{poster}
\DeclareBoolOption[true]{mathscr}
\DeclareBoolOption[true]{biblatex}
\DeclareBoolOption[false]{coloredconcepts}
\DeclareBoolOption[true]{ltablex}

\DeclareStringOption[english]{language}
\DeclareStringOption[0.0em]{defindent}
\DeclareStringOption[ams]{ocontsyntax}
\DeclareStringOption[alphabetic]{bibstyle}
\DeclareStringOption{bibresource}
\DeclareStringOption[iota]{pagestyle}
\DeclareStringOption[11]{DIV}
\DeclareStringOption[none]{hyperref}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Processing options                                                                   %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ProcessKeyvalOptions*

% needed later for string comparison
\long\def\isequal#1#2{\pdf@strcmp{#1}{#2}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% used packages                                                                        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}

\ifpre@koma
  \RequirePackage[
       automark, % Kapitelangaben in Kopfzeile automatisch erstellen
       headsepline, % Trennlinie unter Kopfzeile
       plainheadsepline,
       ilines % Trennlinie linksbuendig ausrichten
   ]{scrpage2}
   \RequirePackage{scrhack}
\fi

\ifpre@etoolbox
  \RequirePackage{etoolbox}
\fi

\RequirePackage{xparse}
%\RequirePackage{ifdraft}

% Anpassung an Landessprache
\RequirePackage[\pre@language]{babel}  

\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage{amsthm} 
\RequirePackage{thmtools}
\RequirePackage{mathtools} 

\RequirePackage{textcomp} % Euro-Zeichen etc.
\RequirePackage{wasysym}
\RequirePackage{upgreek}
\RequirePackage{marvosym}
\RequirePackage{mathdots} % fuer \iddots
\RequirePackage{stmaryrd} % needed for \llbracket
\RequirePackage{pifont}   % for \cmark and \xmark
\ifpre@mathscr
  \RequirePackage{mathrsfs} % for \mathscr{A}
\fi

\RequirePackage{dsfont}

\RequirePackage{bbm}

\RequirePackage{url}
\RequirePackage{filecontents}

\ifpre@biblatex
  \ifpre@beamer
    \RequirePackage[style=\pre@bibstyle,backend=biber]{biblatex}
    \setbeamertemplate{bibliography item}[text]
    \renewcommand*{\bibfont}{\scriptsize}
  \else
    \ifpre@poster
      \RequirePackage[style=\pre@bibstyle,backend=biber]{biblatex}
    \else
      \RequirePackage[style=\pre@bibstyle,backend=biber,maxnames=99,minalphanames=3,maxitems=99,]{biblatex}
    \fi
  \fi
  \addbibresource{\pre@bibresource}
  \newcommand{\thebibresource}{\pre@bibresource}
\fi


\RequirePackage{xspace}
\RequirePackage{calc}


\RequirePackage[math]{blindtext}
\RequirePackage{marginnote}
\RequirePackage{tabularx}

\RequirePackage{tikz}
\usetikzlibrary{matrix}
\usetikzlibrary{automata}
\usetikzlibrary{positioning}
\usetikzlibrary{decorations}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{decorations.pathreplacing}
\usetikzlibrary{through}
\usetikzlibrary{shadows}
\usetikzlibrary{mindmap,trees}
\ifpre@oldtikz
  \usetikzlibrary{arrows} % deprecated, see pgfmanual_v3.00.pdf, page 183
\else
  \usetikzlibrary{arrows.meta} % only available since TikZ v3.00
\fi
\usetikzlibrary{calc}
\usetikzlibrary{trees}
\usetikzlibrary{fadings}
\usetikzlibrary{shapes}
\usetikzlibrary{shadows}
\usetikzlibrary{backgrounds}
\usetikzlibrary{shadows.blur}
\usetikzlibrary{positioning}
\usetikzlibrary{arrows.meta}
\ifpre@beamer\else\RequirePackage{enumitem}\fi
\ifpre@beamer\else\RequirePackage{authblk}\fi
\RequirePackage[\pre@language]{todonotes} % provides the commands \todo[inline]{}, \missingfigure \listoftodos,

\RequirePackage{csquotes}

\RequirePackage{graphicx}
\graphicspath{{../figures/}}

\RequirePackage{rosi-syntax-tikz}

%% The titling package provides the commands \thedate, \theauthor and
%% \thetitle for later use, e.g. in the footer
\ifpre@beamer\else\RequirePackage{titling}\fi

\ifpre@beamer
  \RequirePackage[rgb]{TUDCDrosi/tudcdcolors}
\fi
\ifpre@poster
  \RequirePackage[rgb]{TUDCDrosi/tudcdcolors}
  %\RequirePackage[cmyk]{TUDCDrosi/tudcdcolors} %somehow not working
\fi

\RequirePackage{diagbox}
\ifpre@beamer\else\RequirePackage{subcaption}\fi
\RequirePackage{booktabs}
\RequirePackage{multirow}
\RequirePackage{nicefrac} % for \nicefrac

\RequirePackage{pgfplots}
\pgfplotsset{compat=1.12}
\RequirePackage[caption=false,font=footnotesize]{subfig}

\ifpre@ltablex
  % http://tex.stackexchange.com/questions/115177/nested-tabularx-doesnt-work-with-ltablex
  %
  % DOES NOT WORK WITH NESTING
  %
  \let\tx@\TX@endtabularx
  \def\restoretx{\let\TX@endtabularx\tx@}
  \RequirePackage{ltablex}
  \keepXColumns
\fi

\RequirePackage{layout} % for the amazing \layout-macro

\RequirePackage{silence}
\ifpre@beamer
  \WarningFilter{biblatex}{Patching footnotes failed}
\fi


\ifdefstring{\pre@hyperref}{none}{
  \RequirePackage{hyperref}
}{
  \RequirePackage[\pre@hyperref]{hyperref}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% page style                                                                           %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifpre@koma
  \KOMAoptions{parskip=half-,
               fontsize=10pt,
               BCOR=0mm,
               DIV=\pre@DIV}
  \recalctypearea

  \title{**NO TITLE SET**}
  \date{**NO DATE SET**}
  \ifdefstring{\pre@pagestyle}{iota}{
    \pagestyle{scrheadings}
    \lohead[\iotasun]{\iotasun}
    \cohead{}
    \rohead{}
    \lofoot{\thetitle, \thedate}
    \cofoot[]{}
    \rofoot[\pagemark]{\pagemark}
  }{}
  \ifdefstring{\pre@pagestyle}{empty}{
    \pagestyle{empty}
  }{}
  \ifdefstring{\pre@pagestyle}{iota-min}{
    \pagestyle{scrheadings}
    \lohead[\iotasun]{\iotasun}
    \cohead{}
    \rohead{}
    \lofoot{}
    \cofoot{}
    \rofoot{}
  }{}
\fi

%% Spacing within itemize (using enumitem)
\ifpre@beamer\else
  \setlist[itemize,1]{topsep=-0.5\baselineskip+6pt,itemsep=0pt,parsep=3pt}
\fi
\setlength{\topsep}{1ex plus0.5ex minus0.5ex}

\AtBeginDocument{%
  \abovedisplayskip=0.5\baselineskip
  \abovedisplayshortskip=1pt plus 1pt
  \belowdisplayskip=0.5\baselineskip
  \belowdisplayshortskip=3pt plus 1pt minus 1pt
}

\binoppenalty=\maxdimen
\relpenalty=\maxdimen

%% change page margins locally, see
%% http://www.tex.ac.uk/cgi-bin/texfaq2html?label=chngmargonfly
%%
%% DOES NOT UPDATE \textwidth
\newenvironment{changemargin}[2]{%
  \begin{list}{}{%
    \setlength{\topsep}{0pt}%
    \setlength{\leftmargin}{#1}%
    \setlength{\rightmargin}{#2}%
    \setlength{\listparindent}{\parindent}%
    \setlength{\itemindent}{\parindent}%
    \setlength{\parsep}{\parskip}%
  }%
  \item[]}{\end{list}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% new environments                                                                     %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifpre@ownenv
  %self-defined environments

  % definition of several lengths
  \newlength{\@defindent}
  \newlength{\@defstyleabovespace}
  \newlength{\@defstylebelowspace}
  \newlength{\@whitespacelength}

  \setlength{\@defindent}{\pre@defindent}
  \setlength{\@defstyleabovespace}{6pt}
  \setlength{\@defstylebelowspace}{0pt}

  \setlength{\@whitespacelength}{\widthof{ }}

  \declaretheoremstyle[
    spaceabove = \@defstyleabovespace,
    spacebelow = \@defstylebelowspace,%
    headfont   = \normalfont\bfseries,%
    bodyfont   = \normalfont\itshape]{thmstyle}
  \declaretheoremstyle[
    spaceabove = \@defstyleabovespace,
    spacebelow = \@defstylebelowspace,
    headfont   = \normalfont\bfseries,
    headindent = -\@defindent,
    headpunct  = {},
    postheadspace = \newline,
    notefont   = \normalfont\itshape,
    notebraces = {\textnormal{[}}{\textnormal{]}},
    bodyfont   = \addtolength{\@totalleftmargin}{\@defindent}
                 \addtolength{\linewidth}{-\@defindent}
                 \parshape 1 \@defindent \linewidth,
    ]{defstyle}
  \declaretheoremstyle[
    spaceabove = \@defstyleabovespace,
    spacebelow = \@defstylebelowspace,
    headfont   = \normalfont\bfseries,
    headindent = -\@defindent,
    notefont   = \normalfont\itshape,
    notebraces = {\textnormal{[}}{\textnormal{]}},
    bodyfont   = \addtolength{\@totalleftmargin}{\@defindent}
                 \addtolength{\linewidth}{-\@defindent}
                 \parshape 1 \@defindent \linewidth,
    ]{exstyle}
  \declaretheoremstyle[
    spaceabove = \@defstyleabovespace,
    spacebelow = \@defstylebelowspace,
    headfont   = \normalfont\bfseries,
    bodyfont   = \normalfont,
    headpunct  = {},
    postheadspace = \newline,
    notefont   = \normalfont\itshape,
    notebraces = {}{},
    headformat = \NAME\ \NUMBER :\NOTE
    ]{algstyle}
  \declaretheoremstyle[
    spaceabove = \@defstyleabovespace,
    spacebelow = \@defstylebelowspace,
    headfont   = \normalfont\bfseries,
    headindent = -\@defindent,
    headpunct  = {:},
    notefont   = \normalfont\itshape,
    notebraces = {\textnormal{(}}{\textnormal{)}},
    bodyfont   = \addtolength{\@totalleftmargin}{\@defindent}
                 \addtolength{\linewidth}{-\@defindent}
                 \parshape 1 \@defindent \linewidth,
    ]{bemstyle}
  \declaretheoremstyle[
    spaceabove = \@defstyleabovespace,
    spacebelow = 0pt,%\defstylebelowspace,
    headindent = -\@defindent,
    headpunct  = {:},
    notefont   = \normalfont\bfseries,
    notebraces = {}{},
    bodyfont   = \addtolength{\@totalleftmargin}{\@defindent}
                 \addtolength{\linewidth}{-\@defindent}
                 \parshape 1 \@defindent \linewidth,
    headformat = \hspace{-\@whitespacelength}\NOTE
    ]{blockstyle}

  % Konfiguration von amsmath mit thmtools
  \ifdefstring{\XKV@documentclass}{scrreprt.cls}{ %% documentclass ist scrreprt
    \declaretheorem[style=thmstyle, title=Theorem, numberwithin=chapter]{thm}
  }{ %% documentclass ist nicht scrreprt
    \declaretheorem[style=thmstyle, title=Theorem]{thm}
  }
  \declaretheorem[style=thmstyle, title=Proposition, sibling=thm]{prop}
  \declaretheorem[style=thmstyle, title=Lemma      , sibling=thm]{lem}
  \declaretheorem[style=thmstyle, title=Corollary  , sibling=thm]{cor}
  \declaretheorem[style=thmstyle, title=Conjecture , sibling=thm]{conj}
  \declaretheorem[style=defstyle, title=Definition , sibling=thm, qed=$\diamond$]{defi}
  \declaretheorem[style=defstyle, title=Definition , numbered=no, qed=$\diamond$]{defi*}
  \declaretheorem[style=bemstyle, title=Remark     , numbered=no]{rem}
  \declaretheorem[style=algstyle, title=Algorithm  , sibling=thm, qed=$\diagup$]{alg}
  \declaretheorem[style=algstyle, title=Algorithm  , numbered=no, qed=$\diagup$]{alg*}
  \declaretheorem[style=bemstyle, title=Note       , numbered=no]{note}
  \ifdefstring{\XKV@documentclass}{beamer.cls}{
    % example and block are already defined 
  }{
    \declaretheorem[style=exstyle   , title=Example, sibling=thm, qed=$\vartriangle$]{example}
    \declaretheorem[style=exstyle   , title=Example, numbered=no, qed=$\vartriangle$]{example*}
    \declaretheorem[style=blockstyle, title={t}    , numbered=no]{block}
  }

  \newcommand{\noproof}{\qed}
  \newenvironment{claim}[1]{\par\noindent\underline{\textit{Claim}:}\space#1}{}
  \newenvironment{claimproof}[1]{\par\noindent\underline{\textit{Proof}:}\space#1}{\leavevmode\unskip\penalty9999
    \hbox{}\nobreak\hfill\quad\hbox{$\diagup$}}


\else
  %predefined environments
  \theoremstyle{plain}
  \newtheorem{thm}{Theorem}
  \newtheorem{lem}[thm]{Lemma}
  \newtheorem{cor}[thm]{Corollary}
  \newtheorem{conj}[thm]{Conjecture}
  \newtheorem*{claim}{Claim}
  \theoremstyle{definition}
  \newtheorem{defi}[thm]{Definition}
  \newtheorem{ex}[thm]{Example}
  % \newenvironment{claim}[1]{\par\noindent\underline{\textit{Claim}:}\space#1}{}
  \newenvironment{claimproof}[1]{\par\noindent \textit{Proof}:\space#1}{\leavevmode\unskip\penalty9999
    \hbox{}\nobreak\hfill\quad\hbox{$\diagup$}}
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% beamer specific macros                                                               %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\@ifclassloaded{beamer}{%
  % beamer
  %
  \setbeamerfont{footnote}{size=\tiny}
  % \AtBeginDocument{%
  %   \setbeamertemplate{itemize items}[triangle]
  % }
  %
  \setbeamercolor{alerted text}{fg=hks_07_k_100}
  %\setbeamercolor{ALERTed text}{fg=hks_57_k_100} %dunkelgrÃ¼n
  \setbeamercolor{ALERTed text}{fg=hks_65_k_100} %hellgrÃ¼n
  %\setbeamercolor{ALERTed text}{fg=hks_44_k_100} %blau
  \colorlet{alertcolor}{hks_07_k_100}
  \colorlet{Alertcolor}{hks_65_k_100}
  \hyphenpenalty=10000
  %
  \newenvironment{nomargin}
    {\begin{changemargin}{-0.15\paperheight}{-0.15\paperheight}}
    {\end{changemargin}}
  %
  %
  \newenvironment{ALERTenv}{\begin{altenv}%
    {\usebeamertemplate{alerted text begin}\usebeamercolor[fg]{ALERTed text}\usebeamerfont{alerted text}}
    {\usebeamertemplate{alerted text end}}{\color{.}}{}}{\end{altenv}}
  \newcommand<>{\Alert}[1]{\begin{ALERTenv}#2\relax#1\end{ALERTenv}}
  %
  %
  % Outline for presentation when using sections
  % http://tex.stackexchange.com/questions/26712/how-to-make-outline-frame-in-beamer
  \AtBeginSection[]{
    \begin{frame}<beamer>
      \frametitle{Outline}% for section \thesection}
      \tableofcontents[currentsection]
    \end{frame}
  }
  \newcommand{\outline}{
    \begin{frame}<beamer>
      \frametitle{Outline}% for section \thesection}
      \tableofcontents
    \end{frame}
  }
  %
  %
  \setlength{\parskip}{8pt plus 4pt minus 4pt}
  %
  \AtBeginDocument{
    \setlength{\abovedisplayskip}{6pt} % Legt den Abstand zwischen einem Text und einer nachfolgenden
                                        % abgesetzten Formel fest, wenn die letzte Zeile des Textes
                                        % relativ lang ist.
    \setlength{\abovedisplayshortskip}{0pt} % Legt den Abstand zwischen einem Text und einer
                                            % nachfolgenden abgesetzten Formel fest, wenn die letzte
                                            % Zeile des Textes relativ kurz ist.  
                                            %
                                            % klappt nicht bei amsmath
    \setlength{\belowdisplayskip}{6pt} % Legt den Abstand zwischen einer abgesetzten Formel und einem
                                       % nachfolgenden Text fest, wenn die Formel relativ lang ist.  
    \setlength{\jot}{4pt} % Definiert einen Zusatzabstand, der innerhalb eines eqnarray zusÃ¤tzlich zum
                          % normalen Zeilenabstand zwischen die Zeilen eingefÃ¼gt wird.
    %
    \addtocounter{framenumber}{-1}
    \maketitle
  }
  %
  %
  \newcommand{\plus}{\hspace{1.5em}\llap{\textcolor{TUDlightgreen}{\textbf{+}} }}
  \newcommand{\minus}{\hspace{1.5em}\llap{\textcolor{TUDorange}{\textbf{--}} }}
}{%
  %no beamer
  %
  \colorlet{alertcolor}{red}
  \NewDocumentCommand{\alert}{O{alertcolor}m}{\textcolor{#1}{#2}}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% poster specific macros                                                               %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\@ifclassloaded{researchfestivalposter}{%
%
% #1 = (no star -> with title | star -> without title)
% #2 = top color
% #3 = bottom color
% #4 = box width
% #5 = title
% #6 = content
%
% \block[red][white]{\linewidth}{Title}{\blindtext}
% \block*{30cm}{}{\blinditemize}
\newlength{\poster@blockwidth}
\NewDocumentCommand{\block}{sO{tudlightblue30}O{tudlightblue10}mm+m}{%
  \setlength{\poster@blockwidth}{#4}%
  \begin{tikzpicture}[baseline=-\baselineskip,anchor=north]%
  \node[%draw,%
        rectangle,%
        rounded corners=18pt,%
        top color=#2,%
        bottom color=#3,%
        drop shadow={opacity=.2},%
        inner sep=1cm] (b)%
    {\begin{minipage}{\poster@blockwidth-2cm}%
        \IfBooleanTF{#1}{}{%
        \begin{center}%
          \textcolor{hks_41_k_100}{\huge\textbf{#5}}%
        \end{center}}%
        #6%
     \end{minipage}};%
  \end{tikzpicture}%
}%


\newcommand{\calcblockheight}[2][\blockheight]{%
  \ifx#1\undefined%
    \newlength{#1}%
  \else%
  \fi%
  \setlength{#1}{\heightof{#2}+\depthof{#2}}%
}

\newlength{\poster@blockheighta}
\newlength{\poster@blockheightb}
\newcommand{\calcdiff}[3][\blockdiff]{%
  \ifx#1\undefined%
    \newlength{#1}%
  \else%
  \fi%
  \calcblockheight[\poster@blockheighta]{#2}%
  \calcblockheight[\poster@blockheightb]{#3}%
  \setlength{#1}{\poster@blockheighta-\poster@blockheightb}%
}

\newcommand{\tikzsmall}{\fontsize{30}{32}\selectfont}

%
%\setitemize{labelindent=.3em,labelsep=.5em,leftmargin=*}
\setlist[itemize]{itemsep=5ex}
%
\colorlet{alertcolor}   {tudorange}
\colorlet{Alertcolor}   {tudlightgreen}

\renewcommand*{\llbracket}{\raisebox{0.1ex}{\ensuremath{[\kern-0.25ex[}}}
\renewcommand*{\rrbracket}{\raisebox{0.1ex}{\ensuremath{]\kern-0.25ex]}}}
}{%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% LTCS title page style                                                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newfont{\LTCSbsfHuge}{ecsx1000 scaled 2074}
\newfont{\LTCSbsfLarge}{ecsx1000 scaled 1150}
\newfont{\LTCSbsf}{ecss10 scaled 1000}

\newcommand{\@ltcsauthor}{\textcolor{red}{\textbf{?????}}}
\newcommand{\@ltcspubtext}{This is an extended version of the article in:}
\newcommand{\@ltcspubwhere}{}
\newcommand{\@ltcsnumber}{\textcolor{red}{\textbf{?????}}}

\newlength{\@tudwidth}
\newlength{\@tcswidth}
\setlength{\@tudwidth}{4.3cm}
\setlength{\@tcswidth}{1\textwidth}
\addtolength{\@tcswidth}{-1\@tudwidth}


% \setlength{\parskip}{.1in}
% \setlength{\parindent}{0in}
% \setlength{\oddsidemargin}{0.71cm}
% \setlength{\voffset}{-.5in}%\setlength{\hoffset}{-.35in}
% \setlength{\textwidth}{14.5cm} \setlength{\textheight}{22.5cm}


\define@key{LTCS}{number}{\renewcommand{\@ltcsnumber}{#1}}
\define@key{LTCS}{author}{\renewcommand{\@ltcsauthor}{#1}}
\define@key{LTCS}{where}{\renewcommand{\@ltcspubwhere}{\@ltcspubtext{} #1}}


\NewDocumentCommand{\LTCStitle}{m}{
  \setkeys{LTCS}{#1}
  \changefontsizes{12pt}
  \thispagestyle{empty}
  \addtocounter{page}{-1}
  \newgeometry{textwidth=14.5cm,textheight=22.5cm,top=38mm}
  %
  {\LTCSbsfLarge
    \begin{tabularx}{\linewidth}[t]{@{}Xr@{}}
      \parbox{42mm}{%\includegraphics[width=40.5mm,draft=false]{TU_Logo_SW}
        } &
      \begin{minipage}[c]{\widthof{Institute for Theoretical Computer Science}}
        \begin{tabular}[t]{@{}l@{}}
          Technische UniversitÃ¤t Dresden\\
          Institute for Theoretical Computer Science\\
          Chair for Automata Theory
        \end{tabular}
      \end{minipage} \\
    \end{tabularx}}
  %
  \vfill
  \begin{center}
    {\LTCSbsfHuge LTCS-Report}
    \vfill
    {\Large\bfseries\@title\par}
    \vfill
    {\large
      \begin{tabular}[t]{c}%
        \@ltcsauthor%
      \end{tabular} \par}%
    \vfill
    {\large LTCS-Report \@ltcsnumber \par} 
    \vskip 1em
    {\@ltcspubwhere}
  \end{center}
  %
  \vfill
  \noindent
    \makebox[0cm][l]{\makebox[1\textwidth]{\raisebox{0cm}[0cm][0cm]{\fboxsep4mm%
    \fbox{\rule{1\textwidth}{0cm}%
    \rule{0cm}{1\textheight}}}}}%
    \makebox[0cm][l]{\makebox[1\textwidth]{\raisebox{0cm}[0cm][0cm]{\fboxsep3mm%
    \fbox{\rule{1\textwidth}{0cm}%
    \rule{0cm}{1\textheight}}}}}%
  %
  {\scriptsize\LTCSbsf
    \begin{tabularx}{\linewidth}[b]{@{}Xr@{}}
      Postal Address: & http://lat.inf.tu-dresden.de\\
      Lehrstuhl fÃ¼r Automatentheorie & \\
      Institut fÃ¼r Theoretische Informatik & Visiting Address:\\
      TU Dresden & NÃ¶thnitzer Str. 46\\
      01062 Dresden & Dresden\\
    \end{tabularx}}
  \newpage
  \changefontsizes{10pt}
  \restoregeometry
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% tikzset                                                                              %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%% macro to check for loaded TikZ libraries
\def\IfTikzLibraryLoaded#1{%
  \ifcsname tikz@library@#1@loaded\endcsname
    \expandafter\@firstoftwo
  \else
    \expandafter\@secondoftwo
  \fi
}

% 41 44 36 33 57 65 07

\tikzset{
  every picture/.style={auto,remember picture},
  every node/.style    = {anchor=center},
  every label/.style   = {align=center, label distance = 1mm, rounded corners=15pt},
  question/.style      = {ellipse, inner sep = 1pt, align=center, fill=hks_44_k_10,},
  box/.style           = {draw, thin, fill=white,blur shadow={shadow blur steps=5}},
  edge/.style          = {shorten <=3pt, shorten >=1pt, -{Latex[length=6pt 5 0, width'=0pt 0.5]}},
  edge2/.style         = {shorten <=2pt, shorten >=2pt, line width=2pt, Round Cap[]-{Stealth[length=4pt 5 0, width'=0pt 0.5]},frametitle},
  edgelabel/.style     = {above=3mm,font=\small, rounded corners=15pt},
  node/.style 2 args   = {circle, draw, fill=#2!50,inner sep=0pt, minimum width=#1,minimum height=0pt},
  node/.default        = {4pt}{black},
  role/.style          = {shorten <=3pt, shorten >=1pt,-{Latex[length=6pt 5 0, width'=0pt 0.5]}, TB1fg},
  domain/.style n args = {3}{rectangle, draw=hks_44_k_90, rounded corners=2mm, inner sep=#3, minimum width=#1, minimum height=#2,fill=hks_65_k_20!50},
  domain/.default      = {0cm}{0cm}{2pt},
  intlabel/.style      = {font=\footnotesize, label distance=0pt,text=TB1fg},
  crom/.style          = {draw=hks_44_k_100, fill=hks_44_k_10, star, inner sep=0pt, minimum
                          size=0.5mm, line width=3pt, outer sep=0pt, star point ratio = 2}, 
  %
  %
  coord/.style         = {anchor=base, inner sep=0pt},
  brace/.style         = {decorate, decoration={brace,amplitude=4pt}, thick},
  wavy/.style          = {decorate, decoration, decoration={coil,aspect=0,amplitude=1.5pt,post length=2.1pt}},
  nominwidth/.style    = {minimum width=0pt},
  nominheight/.style   = {minimum height=0pt},
  nominsize/.style     = {nominheight, nominwidth},
  mylabel/.style       = {nominsize,rounded corners=0pt},
  nominwidth/.style    = {minimum width=0pt},
  outline/.style 2 args = {circle, draw=#1, fill=#1, align=center, minimum size=#2, text=white},
  outline edge/.style 2 args = {circle connection bar switch color=from (#1) to (#2)},
  %
  contexts/.style      = {rectangle, draw=hks_44_k_90, inner sep=4pt, fill=hks_44_k_10!30, rounded corners=2mm, label={#1:$\Cbb$}},
  contexts/.default     = {90}
}



\@ifclassloaded{researchfestivalposter}{%
  \tikzset{
  node/.style 2 args={circle, draw, line width=1pt, fill=#2!50,inner sep=0pt, minimum
    width=#1,minimum height=0pt},
  node/.default={5mm}{black},
  edge/.style={shorten <=5pt, shorten >=5pt},
  mylabel/.add style={}{inner sep=6pt,node font={\fontsize{30}{32}\selectfont}},
  every picture/.add style={}{line width=2.4pt},
  ultra thin/.style={line width=0.6pt},
  very thin/.style={line width=1.2pt},
  thin/.style={line width=2.4pt},
  semithick/.style={line width=3.6pt},
  thick/.style={line width=4.8pt},
  very thick/.style={line width=7.2pt},
  ultra thick/.style={line width=9.6pt},
  every label/.style={mylabel},
  syntax/.style={rectangle, rounded corners=0pt, draw, very thin, inner sep=3mm}
  }
}{%
}

\IfTikzLibraryLoaded{arrows}{
  \tikzset{edge/.add style={}{-latex'}}
}{}

\IfTikzLibraryLoaded{arrows.meta}{
  \tikzset{
    >/.tip={Straight Barb[angle=45:1pt 3]},
    ocont/.style={semithick,solid,black,->},
    edge/.add style={}{-{Latex[width=1pt 3 0]}}
  }
}{
  \tikzset{
    ocont/.style={thick,solid,black,-latex'},
  }
}


\NewDocumentCommand{\grid}{smm}{%
  \draw[\IfBooleanTF{#1}{white}{gray},thin] #2 grid #3;
}

\NewDocumentCommand{\pagegrid}{O{1cm}O{5mm}O{1cm}}{
  \begin{tikzpicture}[remember picture,overlay,shift={(current page.center)}]
    \draw[black!25,ultra thin,step=#1] (current page.south west) grid (current page.north east);
    \draw[black!5, ultra thin, step=#2] (current page.south west) grid (current page.north east);
    \foreach \p in {north,south,west,east,north west, north east, south west, south east}{
      \node[draw=black!50,circle,minimum size=#3] at (current page.\p) {};
    }
  \end{tikzpicture}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% used macros                                                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% mathcolor - textcolor for mathmode so it does not destroy the spaces
%%% from http://tex.stackexchange.com/questions/21598/how-to-color-math-symbols
\def\mathcolor#1#{\@mathcolor{#1}}
\def\@mathcolor#1#2#3{%
  \protect\leavevmode
  \begingroup
    \color#1{#2}#3%
  \endgroup
}



%%% ensureboldmath macro %%%
\newcommand{\@printfamily}{\protect\f@family{}}
\newcommand{\@printseries}{\protect\f@series{}}
\newcommand{\@printshape}{\protect\f@shape{}}
\newcommand{\@printsize}{\protect\f@size{}}
\newcommand{\@printfont}{\@printfamily,\@printseries,\@printshape,\@printsize}
\newcommand{\@printfontlong}{\curr@fontshape}
\newcommand{\ensureboldmath}[1]{%
  {%
    %\@printfont % for debugging
    \ifdefstring{\protect\f@series}{bx}{%
      \ensuremath{\boldsymbol{#1}}%
    }{%
      \ifdefstring{\f@series}{bx}{%
        \ensuremath{\boldsymbol{#1}}%
      }{%
        \ensuremath{#1}%
      }%
    }%
  }%
}%
\newcommand{\@math}[1]{\ensureboldmath{#1}\xspace}


%%% Use varmathbb from txfonts without using the package %%%
% http://tex.stackexchange.com/questions/70368/body-text-affected-in-using-txfonts-package
\DeclareSymbolFont{lettersA}{U}{txmia}{m}{it}
\SetSymbolFont{lettersA}{bold}{U}{txmia}{bx}{it}
\DeclareFontSubstitution{U}{txmia}{m}{it}
\DeclareMathSymbol{\m@thbbch@rA}{\mathord}{lettersA}{129}
\DeclareMathSymbol{\m@thbbch@rB}{\mathord}{lettersA}{130}
\DeclareMathSymbol{\m@thbbch@rC}{\mathord}{lettersA}{131}
\DeclareMathSymbol{\m@thbbch@rD}{\mathord}{lettersA}{132}
\DeclareMathSymbol{\m@thbbch@rE}{\mathord}{lettersA}{133}
\DeclareMathSymbol{\m@thbbch@rF}{\mathord}{lettersA}{134}
\DeclareMathSymbol{\m@thbbch@rG}{\mathord}{lettersA}{135}
\DeclareMathSymbol{\m@thbbch@rH}{\mathord}{lettersA}{136}
\DeclareMathSymbol{\m@thbbch@rI}{\mathord}{lettersA}{137}
\DeclareMathSymbol{\m@thbbch@rJ}{\mathord}{lettersA}{138}
\DeclareMathSymbol{\m@thbbch@rK}{\mathord}{lettersA}{139}
\DeclareMathSymbol{\m@thbbch@rL}{\mathord}{lettersA}{140}
\DeclareMathSymbol{\m@thbbch@rM}{\mathord}{lettersA}{141}
\DeclareMathSymbol{\m@thbbch@rN}{\mathord}{lettersA}{142}
\DeclareMathSymbol{\m@thbbch@rO}{\mathord}{lettersA}{143}
\DeclareMathSymbol{\m@thbbch@rP}{\mathord}{lettersA}{144}
\DeclareMathSymbol{\m@thbbch@rQ}{\mathord}{lettersA}{145}
\DeclareMathSymbol{\m@thbbch@rR}{\mathord}{lettersA}{146}
\DeclareMathSymbol{\m@thbbch@rS}{\mathord}{lettersA}{147}
\DeclareMathSymbol{\m@thbbch@rT}{\mathord}{lettersA}{148}
\DeclareMathSymbol{\m@thbbch@rU}{\mathord}{lettersA}{149}
\DeclareMathSymbol{\m@thbbch@rV}{\mathord}{lettersA}{150}
\DeclareMathSymbol{\m@thbbch@rW}{\mathord}{lettersA}{151}
\DeclareMathSymbol{\m@thbbch@rX}{\mathord}{lettersA}{152}
\DeclareMathSymbol{\m@thbbch@rY}{\mathord}{lettersA}{153}
\DeclareMathSymbol{\m@thbbch@rZ}{\mathord}{lettersA}{154}
\ExplSyntaxOn
\NewDocumentCommand{\varmathbb}{m}
{
  \tl_map_inline:nn { #1 } { \use:c { m@thbbch@r##1 } }
}
\ExplSyntaxOff


%%% Letters in mathcal,mathfrak,mathscr,mathds %%%
\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1mc\endcsname{\@math{\mathcal{#1}}}} 
\docsvlist{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}

\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1mf\endcsname{\@math{\mathfrak{#1}}}} 
\docsvlist{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,%
           a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z}

\ifpre@mathscr
\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1ms\endcsname{\@math{\mathscr{#1}}}} 
\docsvlist{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}
\fi

\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1sf\endcsname{\@math{\mathsf{#1}}}} 
\docsvlist{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}

\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1ds\endcsname{\@math{\mathds{#1}}}} 
\docsvlist{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}

\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1bb\endcsname{\@math{\varmathbb{#1}}}} 
\docsvlist{A,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}
\renewcommand{\Bbb}{\@math{\varmathbb{B}}}

%%% Numbers %%%
\newcommand{\nat}{\@math{\varmathbb{N}}}
\newcommand{\natwz}{\@math{\varmathbb{N}_0}}
\newcommand{\integ}{\@math{\varmathbb{Z}}}
\newcommand{\rat}{\@math{\varmathbb{Q}}}
\newcommand{\real}{\@math{\varmathbb{R}}}



%%% DL Names %%%
\newcommand{\EL}{\@math{\mathcal{E{\kern-.12em}L}}}
\newcommand{\ELbot}{\@math{\smash{\mathcal{E{\kern-.12em}L}^\bot}}}
\newcommand{\ELObot}{\@math{\smash{\mathcal{E{\kern-.12em}LO}^\bot}}}
\newcommand{\FLzero}{\@math{\mathcal{F{\kern-.18em}L}_0}}


\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1\endcsname{\@math{\mathcal{#1}}}}
\docsvlist{ALC,ALCO,ALCI,ALCOI,ALCQ,ALCN,ALCNI,ALCHO,ALCIQ,ALCOIQ,ALCHOIQ,SHQ,SHOQ,SHIQ,SHOIQ,SROIQ}

\newcommand{\ALCD}[1]{\@math{\mathcal{ALC(#1)}}}
\newcommand{\ALCOD}[1]{\@math{\mathcal{ALCO(#1)}}}
\newcommand{\ALCID}[1]{\@math{\mathcal{ALCI(#1)}}}
\newcommand{\ALCQD}[1]{\@math{\mathcal{ALCQ(#1)}}}
\newcommand{\ALCND}[1]{\@math{\mathcal{ALCN(#1)}}}
\newcommand{\DLlite}{{\fontfamily{cmr}\fontseries{m}\fontshape{it}\selectfont DL{-}Lite}\xspace}


%%% modal and temporal logics %%%
\newcommand{\ML}{\@math{\mathcal{ML}}}
\newcommand{\modalK}{\@math{\mathbf{K}}}
\newcommand{\modalKn}{\@math{\mathbf{K_{n}}}}
\newcommand{\modalKm}{\@math{\mathbf{K_{m}}}}
\newcommand{\MLALC}{\@math{\mathcal{ML}_{\mathcal{ALC}}}}
\newcommand{\LTL}{\@math{\mathrm{LTL}}}
\newcommand{\CTL}{\@math{\mathrm{CTL}}}
\newcommand{\HS}{\@math{\mathcal{HS}}}


%%% Context DL names %%%
\newcommand{\con}[2]{\meta{\ensureboldmath{#1}
    \textnormal{\ensuremath{\llbracket}}\obj{\ensureboldmath{#2}}\ensuremath{\rrbracket}}\xspace}
\newcommand{\ALCALC}{\con{\ALC}{\ALC}}
\newcommand{\ALCOALC}{\con{\ALCO}{\ALC}}
\newcommand{\SHOQSHOQ}{\con{\SHOQ}{\SHOQ}}
\newcommand{\SHOIQSHOIQ}{\con{\SHOIQ}{\SHOIQ}}
\newcommand{\SHIQSHIQ}{\con{\SHIQ}{\SHIQ}}
\newcommand{\ELALC}{\con{\EL}{\ALC}}
\newcommand{\ALCEL}{\con{\ALC}{\EL}}
\newcommand{\DLouter}{\@math{\mathcal{L}_{M}}}
\newcommand{\DLinner}{\@math{\mathcal{L}_{O}}}
\newcommand{\LM}{\@math{\mathcal{L}_{M}}}
\newcommand{\LO}{\@math{\mathcal{L}_{O}}}
\newcommand{\LMLO}{\con{\DLouter}{\DLinner}}
\newcommand{\klarALC}{\@math{\ALC_{\!\ALC}}}
\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname c#1\endcsname{\con{\csname #1\endcsname}{\csname #1\endcsname}}}
\docsvlist{ALC,ALCO,ALCI,ALCOI,ALCQ,ALCN,ALCNI,ALCHO,ALCIQ,ALCOIQ,ALCHOIQ,SHQ,SHOQ,SHIQ,SHOIQ,SROIQ}


%%% temporal DL names %%%
\newcommand{\ALCLTL}{\@math{\mathcal{\ALC}\text{-}{\LTL}}} % Marcel's and not the evil one!


%%% sets of concept names, role names, individual names %%%
\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1sig\endcsname{\@math{\mathsf{#1}}}}
\docsvlist{N,O,M}
\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname N#1\endcsname{\@math{\mathsf{N_{#1}}}}}
\docsvlist{C,R,I,A,V}
\newcommand{\NCR}{\ensuremath{\mathsf{N_{Crig}}}}
\newcommand{\NRR}{\ensuremath{\mathsf{N_{Rrig}}}}
\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname O#1\endcsname{\@math{\mathsf{O_{#1}}}}}
\docsvlist{C,R,I,A,V}
\newcommand{\OCR}{\ensuremath{\mathsf{O_{Crig}}}}
\newcommand{\OCF}{\ensuremath{\mathsf{O_{Cflex}}}}
\newcommand{\ORR}{\ensuremath{\mathsf{O_{Rrig}}}\xspace}
\newcommand{\ORF}{\ensuremath{\mathsf{O_{Rflex}}}\xspace}
\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname M#1\endcsname{\@math{\mathsf{M_{#1}}}}}
\docsvlist{C,R,I,A,V}


%%% interpretations %%%
\newcommand{\I}{\Imc}
\newcommand{\IA}{\@math{\I_{\A}}}
\newcommand{\J}{\Jmc}
\newcommand{\G}{\Gmc}
\newcommand{\II}{\@math{\I=(\Delta^{\I},\cdot^{\I})}}
\newcommand{\HH}{\@math{\Hmc=(\Gamma,\cdot^{\Hmc})}}
\newcommand{\C}{\@math{\mathbbm{C}}}
\newcommand{\JJ}{\@math{\J=(\C,\cdot^{\J},\Delta^{\J},(\cdot^{\I_c})_{c\in\C})}}

\newcommand{\KK}{\@math{\Kmc=(\T,\A,\RM,\RO)}}

%%% mathcal letters (short macro) %%%
\newcommand{\D}{\Dmc}
\newcommand{\T}{\Tmc}
\newcommand{\U}{\Umc}
\newcommand{\A}{\Amc}
\newcommand{\M}{\Mmc}
\newcommand{\B}{\Bmc}
\newcommand{\W}{\Wmc}
\newcommand{\X}{\Xmc}
\newcommand{\Y}{\Ymc}


%%% Role Boxes, temporal operators and outer abstractions %%%
\newcommand{\RO}{\@math{\Rmc_{\Osig}}}
\newcommand{\RM}{\@math{\Rmc_{\Msig}}}
\newcommand{\Next}{\@math{\mathsf{X}}}
\DeclareMathOperator{\until}{\mathsf{U}}
\newcommand{\Bb}{\@math{\Bmc^{\bsf}}}
\newcommand{\BB}{\@math{\Bmf=(\B,\RO,\RM)}}
\newcommand{\Bmfb}{\@math{\Bmf^{\bsf}}}
\newcommand{\BBb}{\@math{\Bmf^{\bsf}=(\Bb,\RM)}}
\newcommand{\Jb}{\@math{\J^{\bsf}}}
\newcommand{\bsf}{\@math{\mathsf{b}}}
\newcommand{\ran}{\@math{\mathsf{ran}}}
\newcommand{\dom}{\@math{\mathsf{dom}}}
\newcommand{\im}{\@math{\mathsf{Im}}}

\newcommand*{\oOnt}[1]{\@math{\Omc_{\!#1}}}
\newcommand{\nnf}[1]{\mathsf{nnf}(#1)}
\newcommand{\negnnf}{\mathord{\sim}}


%%% concept constructors for ALC and ALCQ %%%
\newcommand{\atleast}[3]{\ensuremath{{\geqslant_{#1}}#2.#3}\xspace}
\newcommand{\atmost}[3]{\ensuremath{{\leqslant_{#1}}#2.#3}\xspace}
\newcommand{\exact}[3]{\ensuremath{{=_{#1}}#2.#3}\xspace}
\let\origexists\exists
\renewcommand{\exists}{\origexists\,}

%%% inequality relation for individuals if UNA is not assumed
\DeclareMathOperator{\unaineq}{\smash{\mathord{\neq}\mathllap{\raisebox{1.2ex}{.}\hspace{0.3em}}}}

%%% concept constructors for ALC[[ALC]] %%%
\newcommand{\oGCI}[1]{\llbracket #1\rrbracket}
\NewDocumentCommand{\oax}{sm}{\ensuremath{%
    \meta{\mathord{\left\llbracket\IfBooleanTF{#1}{#2}{\obj{#2}}\right\rrbracket}}}
}
%\newcommand{\oax}[1]{\ensuremath{\meta{\mathord{\left\llbracket\obj{#1}\right\rrbracket}}}}
\newcommand{\oaxl}[1]{\ensuremath{\left\llbracket #1\right.}\xspace}
\newcommand{\oaxr}[1]{\ensuremath{\left. #1\right\rrbracket}\xspace}
\newcommand{\oalpha}{\ensuremath{\llbracket\alpha\rrbracket}\xspace}

%%% o-context constructors for unrestricted ALC[[ALC]] %%%
\NewDocumentCommand{\ocont}{mm}{(#1{\uparrow}#2)}
\ifdefstring{\pre@ocontsyntax}{ams}{
  \RenewDocumentCommand{\ocont}{mm}{#1{\uparrow^{#2}}}
}{}
\ifdefstring{\pre@ocontsyntax}{tikz}{
  \newlength{\@uparrowheight}
  \setlength{\@uparrowheight}{\heightof{A}}
  \NewDocumentCommand{\tikz@uparrow}{}{\tikz[baseline=-0.0ex,x=1pt,y=1pt,transform canvas={scale=0.8*\heightof{A}/\@uparrowheight}]{
      %\draw[ocont] (0,0) -- (0,1.1*\heightof{A});
      \draw[ocont] (0,0) -- (0,10);
    }}
  \RenewDocumentCommand{\ocont}{mm}{#1\,{\tikz@uparrow}\,{}^{#2}}
}{}
\ifdefstring{\pre@ocontsyntax}{klar}{
  \RenewDocumentCommand{\ocont}{smO{}m}{
    % #1 (star)      : false -> exists, true -> for all
    % #2 (mandatory) : o-concept
    % #3 (optional)  : m-role
    % #4 (mandatory) : m-concept
    \IfBooleanTF{#1}
      {[\mathbf{#4}]_{\mathbf{#3}} #2}
      {\langle\mathbf{#4}\rangle_{\mathbf{#3}} #2}
  }
}{}
\ifdefstring{\pre@ocontsyntax}{modal}{
  \RenewDocumentCommand{\ocont}{smO{}m}{
    % #1 (star)      : false -> exists, true -> for all
    % #2 (mandatory) : o-concept
    % #3 (optional)  : m-role
    % #4 (mandatory) : m-concept
    \IfBooleanTF{#1}
      {(\Box_{#3}#4) #2}
      {(\Diamond_{#3}#4) #2}
  }
}{}

%%% Syntax highlighting for meta ans object concepts
\newcommand{\obj}[1]{***ERROR***}
\newcommand{\meta}[1]{***ERROR***}

\newcommand{\MetaSyntaxHighlightOn}{%
  \renewcommand{\obj}[1]{\mathcolor{hks_65_k_100}{##1}}%
  \renewcommand{\meta}[1]{\mathcolor{hks_44_k_100}{##1}}%
}
\newcommand{\MetaSyntaxHighlightOff}{%
  \renewcommand{\obj}[1]{##1}
  \renewcommand{\meta}[1]{##1}
}

\ifpre@coloredconcepts
  \MetaSyntaxHighlightOn
\else
  \MetaSyntaxHighlightOff
\fi

%%% Hypertableau macros %%%
\newcommand{\pruneABox}[2]{\@math{\mathsf{prune_{#1}(#2)}}}
\newcommand{\prune}[2]{\pruneABox{#1}{#2}}
\newcommand{\mergeABox}[2]{\@math{\mathsf{merge_{#1}(#2)}}}
\newcommand{\CA}{\@math{(\Cmc,\A)}}
\newcommand{\Ind}[1]{\@math{\mathsf{Ind}(#1)}}
\NewDocumentCommand{\tail}{sm}{\@math{\mathsf{tail}\IfBooleanTF{#1}{'}{}(#2)}}
\NewDocumentCommand{\ar}{m}{\@math{\mathsf{ar}(#1)}}
\NewDocumentCommand{\trans}{m}{\@math{\mathsf{trans}(#1)}}
\newcommand{\Ob}{\@math{\Omc^{\bsf}}}
\newcommand{\Tb}{\@math{\Tmc^{\bsf}}}
\newcommand{\Ab}{\@math{\Amc^{\bsf}}}
\newcommand{\HTinput}{\@math{(\CM,\AM,\CO,\AO)}}
\newcommand{\concat}{{\mskip2mu\mid\mskip2mu}}
\newcommand{\JA}{\@math{\J_{\Ads}}}
\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1M\endcsname{\@math{\csname #1mc\endcsname_{\Msig}}}}
\docsvlist{C,I,A,T}
\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1O\endcsname{\@math{\csname #1mc\endcsname_{\Osig}}}}
\docsvlist{C,I,A}
\newcommand{\muM}{\@math{\mu_{\Msig}}}
\newcommand{\muO}{\@math{\mu_{\Osig}}}
\newcommand{\lhs}{\@math{\mathsf{lhs}}}
\newcommand{\rhs}{\@math{\mathsf{rhs}}}



%%% Complexity classes %%%
\newcommand{\@compclasshelp}[2][]{\textsc{#1#2}\xspace}
\newcommand{\cclass}{\@compclasshelp{C}}
\newcommand{\PTime}{\@compclasshelp{P}}
\newcommand{\NP}{\@compclasshelp{NP}}
\newcommand{\coNP}{\@compclasshelp[co]{NP}}
\newcommand{\ExpTime}{\@compclasshelp{Exp}}
\newcommand{\ExpTIME}{\@compclasshelp{ExpTime}}
\newcommand{\EXPTime}{\@compclasshelp{ExpTime}}
\newcommand{\TwoExpTime}{\@compclasshelp{2Exp}}
\newcommand{\TwoEXPTime}{\@compclasshelp{2ExpTime}}
\newcommand{\NExpTime}{\@compclasshelp{NExp}}
\newcommand{\TwoNExpTime}{\@compclasshelp{2NExp}}
\newcommand{\TwoNEXPTime}{\@compclasshelp{2NExpTime}}
\newcommand{\PSpace}{\@compclasshelp{PSpace}}
\newcommand{\NPSpace}{\@compclasshelp{NPSpace}}
\newcommand{\ExpSpace}{\@compclasshelp{ExpSpace}}
\newcommand{\TwoExpSpace}{\@compclasshelp{2ExpSpace}}
\newcommand{\NExpSpace}{\@compclasshelp{NExpSpace}}
\newcommand{\TwoNExpSpace}{\@compclasshelp{2NExpSpace}}


% \let\origblindtext\blindtext
% \RenewDocumentCommand{\blindtext}{o}{
% \textcolor{gray}{\IfNoValueTF{#1}{\origblindtext}{\origblindtext[#1]}}
% }
%   \let\origblindlist\blindlist
%   \RenewDocumentCommand{\blindlist}{mo}{
%   \textcolor{gray}{\IfNoValueTF{#2}{\origblindlist{#1}}{\origblindlist{#1}[#2]}}
% }


%%% miscellaneous math macros %%%
\renewcommand{\emptyset}{\varnothing}
\newcommand{\powerset}[1]{
  \ifmmode
    \mathcal{P}(#1)
  \else
    \PackageError{contemp-preamble}{%
      The command \protect\powerset\space is only
      available in math mode
    }{}
  \fi
}
\newcommand{\restr}[2]{
  \ifmmode
    \left.#1\right|_{#2}
  \else
    \PackageError{contemp-preamble}{%
      The command \protect\restr\space is only
      available in math mode%
    }{}
  \fi
}


%%% miscellaneous text macros %%%
\newcommand{\comment}[1]{{\MetaSyntaxHighlightOff\color{lightgray} #1}\MetaSyntaxHighlightOn}
\newcommand{\unsure}[1]{{\color{lorange} #1}}
\newcommand{\suth}{\mbox{s.\,t.\ }}

\newcommand{\cmark}{\ding{51}}
\newcommand{\xmark}{\ding{55}}

%%% RoSI macros %%%
\newcommand{\rosirole}{r\^ole\xspace}
\newcommand{\Rosirole}{R\^ole\xspace}
\newcommand{\rosiroles}{r\^oles\xspace}
\newcommand{\Rosiroles}{R\^oles\xspace}
\newcommand{\RBS}{Role-Based Systems\xspace}


%%% CROM macros %%%
\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname A#1\endcsname{\@math{A_{\mathsf{\MakeUppercase{#1}}}}}}
\docsvlist{nt,rt,ct,rg}

\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1\endcsname{\@math{\mathsf{#1}}}}
\docsvlist{fills,parts,rel,type,plays,links,rolec,card,intra,counts,atom}

\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1ass\endcsname{\@math{\mathsf{#1\_assert}}}}
\docsvlist{play,link}

\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1ds\endcsname{\@math{\mathds{#1}}}}
\docsvlist{NT,RT}

\renewcommand*{\do}[1]{%
  \expandafter\newcommand\csname #1sf\endcsname{\@math{\mathsf{#1}}}}
\docsvlist{NT,RT,CT,RST,Card,RG,IND}

\newcommand{\MM}{\@math{\M=(\Pmc,\Smc,\fills,\parts,\rel)}}
\newcommand{\CC}{\@math{\Cmc=(\rolec,\card,\intra)}}

% \newcommand*{\Reps}{\@math{\Rsf^{\varepsilon}}}
% \newcommand{\SCROM}{\@math{\Sigma}-CROM}
% \newcommand{\SCROI}{\@math{\Sigma}-CROI}
% \newcommand{\SCROA}{\@math{\Sigma}-CROA}
% \newcommand{\SCROC}{\@math{\Sigma}-CROC}
% \newcommand{\SCCROM}{\@math{\Sigma}-CCROM}

%%% ToDo macros %%%
\newcommand{\ayt}[1]{\todo[color=red,inline]{(ayt) #1}}
\newcommand{\stb}[1]{\todo[inline,color=yellow]{(sb) #1}}
\newcommand{\tk}[1]{\todo[inline,color=green]{(tk) #1}}


%%% To avoid ``invalid PDF token''
\newcommand{\texpdf}[1]{\texorpdfstring{\csname #1\endcsname}{#1}}
%% \texpdf{ALC} yields 'ALC' as PDF token and '\ALC' in the document

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% tabular related macros and fixes                                                   %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
                                                                                         %
%%% columntypes based on tabularx %%%                                                    %
\newcolumntype{L}{>{\raggedright\arraybackslash}X}                                       %
\newcolumntype{R}{>{\raggedleft\arraybackslash}X}                                        %
\newcolumntype{C}{>{\centering\arraybackslash}X}                                         %
                                                                                         %
%%% for tabularx def inside a tabularx X column                                          %
\newcommand{\cellwidth}{\TX@col@width}                                                   %
                                                                                         %
%%% When using Y columns, make sure the sum of the arguments is equal to the number of 
%%% columns. See tabularx documentation, section 4.3
\newcolumntype{Y}[1]{>{\hsize=#1\hsize}X}

%%% tried to have optional arguments in newcolumntype, but didn't work
%%% http://tex.stackexchange.com/questions/8000/is-it-possible-to-create-a-newcolumntype-like-macro-accepting-more-than-one-arg
% \newtoks\mytoks
% \mytoks\expandafter{\the\NC@list}
% \newcolumntype{Z}{}
% \NC@list\expandafter{\the\mytoks \NC@do Z}
% \renewcommand*{\NC@rewrite@Z}[1][2.0]{%
%   \@temptokena\expandafter{%
%     \the\@temptokena 
%       >{\hsize=#1\hsize}X
%   }%
%   \NC@find
% }
                                                                                         %
                                                                                         %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%% unsorted macros come here %%%

% \newcommand*{\follows}{{\tikz[baseline=-0.6ex]{ \draw[-latex'] (0,1ex) |- (2ex,0);}}}
\ifdefstring{\XKV@documentclass}{beamer.cls}{
  \newcommand*{\follows}[1][thick]{{\tikz[baseline=-0.6ex]{ \draw[#1,->] (0,1ex) |- (2ex,0);}}\xspace}
}{
  \newcommand*{\follows}[1][semithick]{{\tikz[baseline=-0.6ex]{ \draw[#1,->] (0,1ex) |- (2ex,0);}}\xspace}
}
\newcommand{\iotasun}{%
\tikz[overlay,scale=0.6, every node/.style={transform shape}]{%
  \coordinate (c) at ($(current page.north east)-(1,1)$);%
  \foreach \w in {0, 30, ..., 330} \draw ($(c)+(\w:4mm)$) -- ($(c)+(\w:7mm)$);%
  \node[circle,draw,inner sep=2] at (c){\large$\ddot\iota$};}%
}

%% How to get a \mid binary relation that grows
% http://tex.stackexchange.com/questions/5502/how-to-get-a-mid-binary-relation-that-grows
\newcommand{\mmid}{\mathrel{}\middle|\mathrel{}}



%% to remove vertical space before an itemize inside tabularx
\newcommand*{\compress}{\@minipagetrue}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% beamer stuff                                                             %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\tikzmark}[2][]{%
  \tikz[remember picture,overlay]\coordinate[#1](#2);%
}

\newcommand{\phbracket}{\ensuremath{\hphantom{\llbracket}}}

% 41 44 36 33 57 65 07

%% defining colors
\definecolor{skyblue}{rgb}{0.80, 0.80, 1.00}
\definecolor{turquoise}{rgb}{0.00, 0.80, 0.60}
\definecolor{gray}{gray}{0.59}
\definecolor{darkgray}{gray}{0.40}

\colorlet{text}{black!30!hks_41_k_100}
\colorlet{frametitle}{gray}
\colorlet{framesubtitle}{black}
\colorlet{accent}{turquoise}
\colorlet{alink}{skyblue}
\colorlet{vlink}{lightgray}
\colorlet{alert}{hks_07_k_100}
\colorlet{titlebackground}{hks_41_k_100}

\setbeamercolor{normal text}{fg=text}
\setbeamercolor{structure}{fg=text}
\setbeamercolor{alerted text}{fg=alert}
\setbeamercolor{frametitle}{fg=frametitle}
\setbeamercolor{framesubtitle}{fg=framesubtitle}


\setbeamercolor{alerted text}{fg=hks_44_k_100}
%\setbeamercolor{ALERTed text}{fg=hks_57_k_100} %dunkelgrÃ¼n
\setbeamercolor{ALERTed text}{fg=hks_65_k_100} %hellgrÃ¼n
%\setbeamercolor{ALERTed text}{fg=hks_44_k_100} %blau
\colorlet{alertcolor}{hks_44_k_100}
\colorlet{Alertcolor}{hks_65_k_100}


\renewcommand*{\framesubtitle}[1]{\textcolor{frametitle}{\textbf{#1}}}
\AtBeginDocument{\setbeamertemplate{caption}{\raggedright\insertcaption\par}}

%% logo

\def\logo@front{TUDCDrosi/logo_weiss}
\def\logo@default{TUDCDrosi/logo_blau}
\ifx\pdfoutput\undefined%
\else%
  \ifx\pdfoutput\relax%
  \else%
    \ifcase\pdfoutput%
    \else%
      \def\logo@front{TUDCDrosi/TU_Logo_SW}%
      \def\logo@default{TUDCDrosi/TU_Logo_SW}%
    \fi%
  \fi%
\fi
\def\conceptlogo@front{TUDCDrosi/DDC-weissf}
\def\rosilogo@front{TUDCDrosi/rosi-inv}
\def\rosilogo@default{TUDCDrosi/rosi}

\renewcommand\maketitle{%
  % \beamertemplateshadingbackground{darkblue}{darkblue}
  \setbeamercolor{normal text}{bg=titlebackground}
  % Kopf-/Fusszeile fuer Titel
  \setbeamertemplate{headline}{%
    \vskip6.15mm%
    \color{white}%
    \setlength{\arrayrulewidth}{0.3pt}%
    \begin{tabular*}{\paperwidth}[b]{l@{\extracolsep\fill}}
      % TUD-Logos
      \hspace*{3.0mm}%
      \color{white}%
      \includegraphics[height=7.81mm,draft=false]{\logo@front}%
      \hspace*{6.96cm}
      \includegraphics[height=7.81mm,draft=false]{\rosilogo@front}%
      \\[1.2mm]\hline
      \hspace*{11.76mm}%
      \rule[-0.8mm]{0pt}{2.47mm}%
      \def\@@dummyComma{}%
      \rule{0pt}{5.8pt}%
      \textbf{\@einrichtung }\ifx\@einrichtung\@empty\else\def\@@dummyComma{ }\fi%
      \ifx\@fachrichtung\@empty%
      \else%
      \@@dummyComma\@fachrichtung%
      \ifx\@institut\@empty\else\def\@@dummyComma{, }\fi%
      \ifx\@professur\@empty\else\def\@@dummyComma{, }\fi%
      \fi%
      \ifx\@institut\@empty\else\@@dummyComma\@institut%
      \ifx\@professur\@empty\else\def\@@dummyComma{, }\fi%
      \fi%
      \ifx\@professur\@empty\else\@@dummyComma\fi%
      \@professur\\[-1pt]\hline
    \end{tabular*}\hspace{-\paperwidth}%
  }%
  \setbeamertemplate{footline}{%
    \parbox[t][9.63mm]{\paperwidth}{%  \parbox[t][9.63mm]{\paperwidth}{
      \vspace*{-13.63mm}%
      \rule{13.86mm}{0pt}%
      \small%
      \color{white}%
      \insertdatecity%
      \ifx\insertdatecity%
      \empty%
      \else%
      \ifx\insertdate%
      \empty%
      \else%
      , %
      \fi%
      \fi%
      \insertdate%
      \hfill%
      \parbox[b][13mm]{13mm}{
        \includegraphics[height=13mm,draft=false]{\conceptlogo@front}%
      }
    }
    % \vspace{8mm}
    % \includegraphics[height=9.63mm]{\conceptlogo@front}%
  }%
  \frame{\titlepage}%
  % Kopf-/Fusszeilen fuer restliche Folien
  \setbeamertemplates%
}

\setbeamertemplate{title page}{
  \color{white}%
  \vfill%
  \usebeamerfont*{title}%
  \vskip2ex plus1ex minus1ex%
  \MakeUppercase{\inserttitle}%
  % \inserttitle%
  \vfill%
  \ifx\insertsubtitle\empty%
  \else%
  \usebeamerfont*{subtitle}%
  \insertsubtitle%
  \vfill%
  \fi%
  \normalfont\large%
  \insertauthor%
  \vfill%
  \vfill%
}

\newcommand{\beamersmall}{\fontsize{6}{6}\selectfont}

\AtBeginDocument{\renewcommand{\@slide}{}}

\newcommand{\slideMotivation}{%
\begin{frame}
%  \vspace*{-2cm}
  \frametitle*{Motivation}
  \framesubtitle{What is a Role?}
  
  \begin{minipage}{0.45\linewidth}
   
    \begin{itemize}
    \item Modelling concept from OOP introduced by Bachman in 1973
    \item Classification of roles with 26 \emph{Features} including identity, behaviour,
      relationships, players, \dots{} and about Contexts and Constraints
      {\tiny(\cite{KuLG-SLE14,Stei-DKE00})}
    \end{itemize}
  \end{minipage}\hfill
  \begin{minipage}{0.5\linewidth}
    \begin{tikzpicture}[cls/.style={draw,rectangle,minimum width=2cm,minimum height=5mm}]
      \only<1-2>{\node[cls] (a) at (0,1.5) {\only<1>{Person}\only<2>{\textit{Customer}}};}
      \only<3->{\node[cls] (a) at (-1.8,1.5) {Person};}
      \only<3->{\node[cls] (b) at (1.8,1.5) {Company};}
      \node[cls] (c) at (-1.8,0) {\only<1,3->{\textit{Customer}}\only<2>{Person}};
      \node[cls] (d) at (1.8,0) {\only<1,3->{\textit{Supplier}}\only<2>{Company}};
      \only<1->{\draw (c) -- (a) -- (d);}
      \only<3->{\draw (c) -- (b) -- (d);}
    \end{tikzpicture}
  \end{minipage}

\uncover<4->{
\framesubtitle{Requirements for modern Software Systems:}

\begin{minipage}{1.0\linewidth}
  \begin{itemize}
  \item Adaptability \only<5->{\alert{\qquad $\to$ \smash{Roles} allow for dynamic changes of the
        system.}}
  \item High expressiveness \only<5->{\alert{\qquad $\to$ Roles increase separation of
        concerns.}}
  \item Longevity \only<5->{\alert{\qquad $\to$ Roles enable updating running applications.}}
  \end{itemize}
\end{minipage}

}
  
\end{frame}
}

\newcommand{\slideRoleBasedSystems}{%
\begin{frame}
  \frametitle*{\RBS}
  \vspace*{-2ex}
  \begin{itemize}
  \item Software systems that use the notion of roles
  \item Focus on: Compartment Role Object Model (CROM), {\tiny(\cite{KuLG-SLE14})}
    \begin{itemize}
    \item Well-defined semantical foundation {\tiny(\cite{KBG-SLE15})}
    \end{itemize}
  \end{itemize}
  %
  %\vfill
  \only<2-4>{
    \framesubtitle{Key properties of roles:}
    \begin{itemize}
    \item Roles depend on the context.
    \item Contexts, `players' and roles themselves have each their own identity.
    \item Roles change over time.
    \end{itemize}
  }
  %
  %\vfill
  \only<3-4>{
    \framesubtitle{Problems:}
    \begin{itemize}
    \item Large systems/models hard to comprehend
    \item Modelling errors stay undetected \only<4>{\qquad\alert{$\rightarrow$ Logic-based
          formalisms}}
    \end{itemize}
  }

  \only<5>{
    \begin{minipage}[t]{0.5\linewidth}
      \fontsize{6.5}{7}\selectfont
      \framesubtitle{Key properties of roles:}
      \begin{itemize}
      \item Roles depend on the context.
      \item Contexts, `players' and roles themselves have each their own identity.
      \item Roles change over time.
      \end{itemize}
    \end{minipage}%
    \begin{minipage}[t]{0.5\linewidth}
      \fontsize{6.5}{7}\selectfont
      \framesubtitle{Problems:}
      \begin{itemize}
      \item Large systems/models hard to comprehend
      \item Modelling errors stay undetected
      \item[\follows] Logic-based formalisms
      \end{itemize}
    \end{minipage}
    \vfill
    \framesubtitle{Requirements on logical formalism}
    \begin{itemize}
    \item Decidable reasoning tasks
    \item Express contexts, `players' and roles as formal objects
    \item Model contexts and ternary relation of role-playing
    \item Ability to handle \emph{rigid}, i.e.\ context-independent, knowledge
    \end{itemize}
    
  }
  
  %\vfill
\end{frame}
}

\newcommand{\slideWorkflow}{%
\begin{frame}
  \frametitle*{\hspace*{-14mm} \rlap{Workflow of Automated Analysis of Role-Based Models}}
  \vspace*{0mm}
  
  \hspace*{-10mm}
  \begin{tikzpicture}[node distance=2cm]
    \node[label={[align=center, label distance=0mm]270:Banking\\application}] (bank) at (0,0)
    {\includegraphics[width=13mm]{bank}};
    \uncover<2->{
    \node[label={270:Graphical notation of a CROM\\ and its formal representation},
    box, inner ysep=0pt, minimum height=1.8cm] (crom) at (2,-3) {
      \begin{tikzpicture}
        \node at (0,0) {\includegraphics[width=2.0cm]{Bank-full-constraints}};
        \node at (2.1,0)  {\includegraphics[width=1.3cm]{formalCROM}};
        \draw (1.3,-0.7) to (1.3,0.7);
      \end{tikzpicture}
    };
    \draw[edge2, shorten <=-5pt] (bank.330) to[bend left=15]
      node[right,pos=0.5,align=center]{Graphical\\editor}(crom.125);
    }
    %
    %
    \uncover<3->{
    \node[label={[align=center]270:Contextualized\\DL ontology}, box, minimum
      height=1.0cm] (ontology) at (5.0,0.0) {\includegraphics[width=2.5cm]{ontology}};
    \draw[edge2] (crom.60) to[bend left=15] node[left=1mm,pos=0.9,align=center]{Automated\\mapping}
      (ontology.180);
    }
    % 
    %
    \uncover<4->{
    \node[blur shadow={shadow blur steps=5}, inner sep=0pt, label={[align=center]270:JConHT
      Reasoner}] (reasoner) at (7,-3)
      {\includegraphics[width=2.0cm]{Protege-OWL}};
    \draw[edge2] (ontology.330) to [bend left=5] node[left,pos=0.85,align=center]{Reasoning}
      (reasoner.125);
    }
    % 
    %
    \uncover<5>{
    \node[question, minimum height = 7mm] (q1) at (8.8,-1.1)
      {\beamersmall \textbf{Inconsistencies?}};
    \node[question]                       (q2) at (9.7,-2)
      {\beamersmall Can specific role\\[-0.6ex] \beamersmall be played?};
    \node[question]                       (q4) at (10.0,-3)
      {\beamersmall Partial knowledge\\[-0.6ex] \beamersmall satisfiable?};
    \node[question]                       (q3) at (9.8,-4)
      {\beamersmall Are even stronger \\[-0.6ex] \beamersmall constraints entailed?};
    %
    \draw[edge] (reasoner) to (q1);
    \draw[edge] (reasoner) to (q2);
    \draw[edge] (reasoner) to (q3);
    \draw[edge] (reasoner) to (q4);
    }
  \end{tikzpicture}
\end{frame}
}

\newcommand{\slideOutline}[1]{%
\begin{frame}
  \frametitle*{\hspace*{-14mm} \rlap{Workflow of Automated Analysis of Role-Based Models}}
  \vspace*{0mm}
  
  \hspace*{-10mm}
  \begin{tikzpicture}[node distance=2cm]
    \ifnum #1>0
    \node[opacity=0.1,label={[opacity=0.1,align=center, label
      distance=0mm]270:Banking\\application}] (bank) at (0,0) 
    {\includegraphics[width=13mm]{bank}};
    \node[opacity=0.1,label={[opacity=0.1]270:Graphical notation of a CROM\\ and its formal representation},
    box, inner ysep=0pt, minimum height=1.8cm] (crom) at (2,-3) {
      \begin{tikzpicture}
        \node at (0,0) {\includegraphics[width=2.0cm]{Bank-full-constraints}};
        \node at (2.1,0)  {\includegraphics[width=1.3cm]{formalCROM}};
        \draw (1.3,-0.7) to (1.3,0.7);
      \end{tikzpicture}
    };
    \draw[opacity=0.1,edge2, shorten <=-5pt] (bank.330) to[bend left=15]
      node[right,pos=0.5,align=center]{Graphical\\editor}(crom.125);
    \else
    \node[label={[align=center, label distance=0mm]270:Banking\\application}] (bank) at (0,0)
    {\includegraphics[width=13mm]{bank}};
    \node[label={270:Graphical notation of a CROM\\ and its formal representation},
    box, inner ysep=0pt, minimum height=1.8cm] (crom) at (2,-3) {
      \begin{tikzpicture}
        \node at (0,0) {\includegraphics[width=2.0cm]{Bank-full-constraints}};
        \node at (2.1,0)  {\includegraphics[width=1.3cm]{formalCROM}};
        \draw (1.3,-0.7) to (1.3,0.7);
      \end{tikzpicture}
    };
    \draw[edge2, shorten <=-5pt] (bank.330) to[bend left=15]
      node[right,pos=0.5,align=center]{Graphical\\editor}(crom.125);
    \fi
    %  
    %
    \ifnum #1<2
    \node[label={[align=center]270:Contextualized\\DL ontology}, box, minimum
    height=1.0cm] (ontology) at (5.0,0.0) {\includegraphics[width=2.5cm]{ontology}};
    \else
    \node[opacity=0.1,label={[opacity=0.1,align=center]270:Contextualized\\DL ontology}, box, minimum
    height=1.0cm] (ontology) at (5.0,0.0) {\includegraphics[width=2.5cm]{ontology}};
    \fi
    %
    \ifnum #1=2
    \draw[edge2] (crom.60) to[bend left=15] node[left=1mm,pos=0.9,align=center]{Automated\\mapping}
    (ontology.180);
    \else
    \ifnum #1=0
    \draw[edge2] (crom.60) to[bend left=15] node[left=1mm,pos=0.9,align=center]{Automated\\mapping}
    (ontology.180);
    \else
    \draw[opacity=0.1,edge2] (crom.60) to[bend left=15] node[left=1mm,pos=0.9,align=center]{Automated\\mapping}
    (ontology.180);
    \fi
    \fi
    % 
    %
    \ifnum #1>0
    \ifnum #1<3
    \node[opacity=0.1,blur shadow={shadow blur steps=5}, inner sep=0pt, label={[opacity=0.1,align=center]270:JConHT
      Reasoner}] (reasoner) at (7,-3)
      {\includegraphics[width=2.0cm]{Protege-OWL}};
    \draw[opacity=0.1,edge2] (ontology.330) to [bend left=5] node[left,pos=0.85,align=center]{Reasoning}
      (reasoner.125);
    \node[opacity=0.1,question, minimum height = 7mm] (q1) at (8.8,-1.1)
      {\beamersmall \textbf{Inconsistencies?}};
    \node[opacity=0.1,question]                       (q2) at (9.7,-2)
      {\beamersmall Can specific role\\[-0.6ex] \beamersmall be played?};
    \node[opacity=0.1,question]                       (q4) at (10.0,-3)
      {\beamersmall Partial knowledge\\[-0.6ex] \beamersmall satisfiable?};
    \node[opacity=0.1,question]                       (q3) at (9.8,-4)
      {\beamersmall Are even stronger \\[-0.6ex] \beamersmall constraints entailed?};
    \draw[opacity=0.1,edge] (reasoner) to (q1);
    \draw[opacity=0.1,edge] (reasoner) to (q2);
    \draw[opacity=0.1,edge] (reasoner) to (q3);
    \draw[opacity=0.1,edge] (reasoner) to (q4);
    \else
      \node[blur shadow={shadow blur steps=5}, inner sep=0pt, label={[align=center]270:JConHT
      Reasoner}] (reasoner) at (7,-3)
      {\includegraphics[width=2.0cm]{Protege-OWL}};
    \draw[edge2] (ontology.330) to [bend left=5] node[left,pos=0.85,align=center]{Reasoning}
    (reasoner.125);
    \node[question, minimum height = 7mm] (q1) at (8.8,-1.1)
      {\beamersmall \textbf{Inconsistencies?}};
    \node[question]                       (q2) at (9.7,-2)
      {\beamersmall Can specific role\\[-0.6ex] \beamersmall be played?};
    \node[question]                       (q4) at (10.0,-3)
      {\beamersmall Partial knowledge\\[-0.6ex] \beamersmall satisfiable?};
    \node[question]                       (q3) at (9.8,-4)
      {\beamersmall Are even stronger \\[-0.6ex] \beamersmall constraints entailed?};
    \draw[edge] (reasoner) to (q1);
    \draw[edge] (reasoner) to (q2);
    \draw[edge] (reasoner) to (q3);
    \draw[edge] (reasoner) to (q4);
    \fi
    \else
    \node[blur shadow={shadow blur steps=5}, inner sep=0pt, label={[align=center]270:JConHT
      Reasoner}] (reasoner) at (7,-3)
      {\includegraphics[width=2.0cm]{Protege-OWL}};
    \draw[edge2] (ontology.330) to [bend left=5] node[left,pos=0.85,align=center]{Reasoning}
    (reasoner.125);
    \node[question, minimum height = 7mm] (q1) at (8.8,-1.1)
      {\beamersmall \textbf{Inconsistencies?}};
    \node[question]                       (q2) at (9.7,-2)
      {\beamersmall Can specific role\\[-0.6ex] \beamersmall be played?};
    \node[question]                       (q4) at (10.0,-3)
      {\beamersmall Partial knowledge\\[-0.6ex] \beamersmall satisfiable?};
    \node[question]                       (q3) at (9.8,-4)
      {\beamersmall Are even stronger \\[-0.6ex] \beamersmall constraints entailed?};
    \draw[edge] (reasoner) to (q1);
    \draw[edge] (reasoner) to (q2);
    \draw[edge] (reasoner) to (q3);
    \draw[edge] (reasoner) to (q4);
    \fi
  \end{tikzpicture}
\end{frame}
}

\newcommand{\slideBankTikZ}{%
\begin{frame}
  \frametitle*{Running Example -- Banking Application}

  \hspace*{-8mm}
  \begin{tikzpicture}
    %\grid{(0,0)}{(10,5)}
    %
    \tikzNatural{person}{1,1}{1.5cm}{Person}{\beamersmall name\\ age\\[-1ex] profession}{}
    \tikzNatural{comp}{3,1}{1.5cm}{Company}{}{}
    \tikzNatural{acc}{8.8,3}{1.5cm}{Account}{}{}
    %
    \uncover<2->{
    \tikzContext{bank}{3.3,4}{0cm}{Bank}{
      \uncover<3->{
      \tikzRole{cons}{0.3,3}{1cm}{Consultant}{1..*}
      \tikzRole{cus}{0.3,1.12}{1cm}{Customer}{0..*}
      \tikzRole{monTra}{4,3}{1cm}{MoneyTransfer}{0..*}
      \tikzRoleGroup{rg1}{4,1}{BankAccounts (1..1)}{
        \tikzRole{ca}{0,0.6}{1cm}{CheckingAccount}{}
        \tikzRole{sa}{0,0}{1cm}{SavingsAccount}{}
      }{1..*}
      }
    }
    \tikzContext{transaction}{8.8,5}{0cm}{Transaction}{
      \uncover<3->{
      \tikzRoleGroup{rg2}{0,0}{Participants (1..1)}{
        \tikzRole{source}{0,0}{1cm}{Source}{}
        \tikzRole{target}{3,0}{1cm}{Target}{}
      }{1..1}
      }
    }
    }
    %
    \uncover<4->{
    \tikzFillsV{(person)}{(cus)}{0.4}
    \tikzFillsV{(comp)}{(cus)}{0.4}
    % \tikzFillsH{(person.180)}{(cons.180)}{-0.2}
    \tikzFills{(transaction)}{(monTra)}
    \tikzFills{(acc)}{(rg1)}
    \tikzFills{(acc)}{(rg2)}
    \draw[-triangle 60,thick] (person) -| ($(person)!0.5!(cons)+(-1.1,0)$) |- (cons);
    }
    % 
    \uncover<5->{
    \tikzRST{(source)}{(target)}{1..1}{trans}{1..1}{0.1}{above}{0.9}
    \tikzRST{($(cons.south)+(-0.5,0)$)}{($(cus.north)+(-0.5,0)$)}{0..*}{advises}{1..*}{0.2}{right}{0.8}
    \tikzRSTH{(cus.15)}{(monTra)}{1..1}{issues}{1..*}{shorten <=-3pt}
    \tikzRST{(cus.0)}{(ca)}{1..1}{own\_ca}{0..*}{0.1}{above}{0.8}
    \tikzRSTH{(cus.345)}{(sa)}{1..*}{own\_sa}{0..*}{shorten <=-3pt}
    }
    % 
    %
    %
    \tikzNatural[legendgray]{nt}{8.5,1.7}{1.3cm}{\beamersmall Natural Type}{}{}
    \tikzContext[legendgray]{ct}{8.5,0.7}{1.0cm}{\beamersmall Compartment Type}{
      \tikzRole[legendgray]{rt}{0,0}{5mm}{\beamersmall Role Type}{Card}
    }
    \tikzRoleGroup[legendgray]{rg}{10.5,0.5}{\beamersmall Rolegroup (m..n)}{
      \node{\smash{\hphantom{testtestte}}};
    }{}
    \coordinate (a) at (9.7,1.7);
    \coordinate (b) at (10.1,1.7);
    \draw[legendgray,thin, -triangle 60] (a) -- (b);
    \node[legendgray] at (10.7,1.7){\beamersmall Fills-Relation};
    \coordinate (c) at (9.7,1.2);
    \coordinate (d) at (11.3,1.2);
    \tikzRST[legendgray]{(c)}{(d)}{CardM}{RST}{CardN}{0.15}{above}{0.85}
  \end{tikzpicture}
\end{frame}
}


\newcommand{\slideJConHTEvaluation}{%
\begin{frame}
  \frametitle*{JConHT -- Evaluation}

  \only<1>{%
    \begin{itemize}
    \item Randomly generated CROM instances
      \begin{itemize}
      \item based on parameter $n$
      \item $n$ natural types, $n$ compartment types, for each compartment type $n$ role types
      \end{itemize}
    \item 3 different scenarios
    \end{itemize}
  }
  
  \only<2->{
  \vspace*{-5mm}
  
  \begin{changemargin}{-30pt}{-20pt}
  \begin{figure}[t]
  \centering
  \pgfmathsetmacro{\SCALE}{1}
  \pgfmathsetmacro{\WIDTH}{0.42}
  \pgfmathsetmacro{\HEIGHT}{0.42}
  \uncover<2->{\subfloat[Variation of $\sharp$ RSTs.]{
    \begin{tikzpicture}[scale=\SCALE]
      \begin{axis}[ymode = log, ymin = 1, ymax = 3000,
                   clip=false,
                   width=\WIDTH\textwidth,
                   height=\HEIGHT\textwidth,
                   xtick = {5,10,15,20,25,30,35,40},
                   xticklabel style = {yshift=-2mm},
                   yticklabel style = {xshift=-2.5mm},
                   legend columns = 3,
                   legend style = {at={(0.5,-0.2)}, anchor=north}]
        \addplot[mark=square*]   table [x=n, y=RST0-42,    col sep=comma] {./data/ScenarioI.csv};
        \addplot[mark=triangle*] table [x=n, y=RSThalf-42, col sep=comma] {./data/ScenarioI.csv};
        \addplot[mark=*]         table [x=n, y=RST1-42,    col sep=comma] {./data/ScenarioI.csv};
        \legend{$0$,$\nicefrac{n}{2}$,$n$}
        % 
        \node[anchor = north east, yshift=4mm, xshift=5mm] at (yticklabel* cs:1) {$t$ in $s$};
        \node[anchor = north east, xshift=3mm] at (xticklabel* cs:1) {$n$};
        %
        %\node[node] at(5,\Mean) {};
      \end{axis}
    \end{tikzpicture}%
  }}%
  \hfil%
  \uncover<3->{\subfloat[Variation of $\sharp$ RGs.]{
    \begin{tikzpicture}[scale=\SCALE]
      \begin{axis}[ymode = log, ymin = 1, ymax = 3000,
                   clip = false, 
                   width=\WIDTH\textwidth,
                   height=\HEIGHT\textwidth,
                   xtick = {5,10,15,20,25,30,35,40},
                   xticklabel style = {yshift=-2mm},
                   yticklabel style = {xshift=-2.5mm},
                   legend columns = 3,
                   legend style = {at={(0.5,-0.2)}, anchor=north}]
        \addplot[mark=square*]   table [x=n, y=RG0-42,    col sep=comma] {./data/ScenarioII.csv};
        \addplot[mark=triangle*] table [x=n, y=Rghalf-42, col sep=comma] {./data/ScenarioII.csv};
        \addplot[mark=*]         table [x=n, y=RG1-42,    col sep=comma] {./data/ScenarioII.csv};
        \legend{$0$,$\nicefrac{n}{2}$,$n$}
        % 
        \node[anchor = north east, yshift=4mm, xshift=5mm] at (yticklabel* cs:1) {$t$ in $s$};
        \node[anchor = north east, xshift=3mm] at (xticklabel* cs:1) {$n$};
      \end{axis}
    \end{tikzpicture}
  }}%
  \hfil%
  \uncover<4->{\subfloat[Flat vs.\ nested CTs.]{
    \begin{tikzpicture}[scale=\SCALE]
      \begin{axis}[ymode = log, ymin = 1, ymax = 3000,
                   clip = false,
                   width=\WIDTH\textwidth,
                   height=\HEIGHT\textwidth,
                   xtick = {5,10,15,20,25,30,35,40},
                   xticklabel style = {yshift=-2mm},
                   yticklabel style = {xshift=-2.5mm},
                   legend columns = 2,
                   legend style = {at={(0.5,-0.2)}, anchor=north}]
        \addplot[mark=square*] table [x=n, y=CT0-42, col sep=comma] {./data/ScenarioIII.csv};
        \addplot[mark=*]       table [x=n, y=CT1-42, col sep=comma] {./data/ScenarioIII.csv};
        \legend{$c=\bot$,$c=\top$}
        % 
        \node[anchor = north east, yshift=4mm, xshift=5mm] at (yticklabel* cs:1) {$t$ in $s$};
        \node[anchor = north east, xshift=3mm] at (xticklabel* cs:1) {$n$};
      \end{axis}
    \end{tikzpicture}
  }}
  %
  \caption{Average execution times of JConHT for benchmark ontologies.}
\end{figure}
\end{changemargin}}
\end{frame}
}


\newcommand{\slideSyntaxSemanticsDL}{%
\begin{frame}
  \frametitle*{\alert<1-3>{Syntax} and \alert<4->{Semantics} of the DL \ALC}
  Every consultant advises customers who own an checking account.\
  %Every professor is a person that holds lectures and supervises student.\
  \Alert{$\textsc{Consultant} \sqsubseteq \exists \mathsf{advises}.(\textsc{Customer} \sqcap \exists
  \mathsf{own\_ca}.\textsc{CheckingAccount})$}\\[1ex]

  Peter is a consultant.\qquad
  \Alert{$\textsc{Consultant}(Peter)$}\\[1ex]

  \only<2-3>{ \begin{tabularx}{\linewidth}{@{}l@{ \dots \ }l@{\hspace{1.5cm}}X@{}}
    \alert{\NC} & concept names & $\textsc{Consultant}$, $\textsc{Customer}$, $\textsc{CheckingAccount}$\\
    \alert{\NR} & DL role names & $\mathsf{advises}$, $\mathsf{own\_ca}$\\
    \alert{\NI} & individual names & $Peter$\\
  \end{tabularx}}

  \only<3>{\vspace{1ex}
  \begin{tabularx}{\linewidth}{@{}lX@{}}
    \alert{concept constructors}: & $\Alert{C_{1} \sqcap C_{2}}$, $\Alert{C_{1} \sqcup C_{2}}$, $\Alert{\lnot C_{1}}$,
    $\Alert{\exists r.C}$, $\Alert{\forall r.C}$\\
    \alert{set of \ALC concepts}: & smallest set that is closed under \NC and the concept
    constructors of \ALC\\[1ex]
    \alert{General concept inclusion (GCI)}: & $\Alert{C \sqsubseteq D}$\\
    \alert{assertion}: & $\Alert{C(a)}$, $\Alert{r(a,b)}$\\[1ex]
    \alert{\ALC-axiom}: & a GCI or an assertion\\
  \end{tabularx}}

  \uncover<4->{
  A \alert{DL interpretation \I} has a domain $\Delta^{\I}$ and maps 
  \begin{itemize}
  \item concept names $\Alert{A}$ to sets $A^{\I} \subseteq \Delta^{\I}$,
  \item DL role names $\Alert{r}$ to binary relations $r^{\I} \subseteq \Delta^{\I} \times \Delta^{\I}$, and
  \item individual names $\Alert{a}$ to elements $a^{\I} \in \Delta^{\I}$.
  \end{itemize}}
  \uncover<5->{
  The \alert{semantics of the constructors} is defined as
  \begin{itemize}
  \item $(\Alert{C \sqcap D})^{\I} \coloneqq C^{\I} \cap D^{\I}$,
  \item $(\Alert{\lnot C})^{\I} \coloneqq \Delta^{\I} \setminus C^{\I}$, and
  \item $(\Alert{\exists r.C})^{\I} \coloneqq \{d \in \Delta^{\I} \mid \exists e.(d,e) \in r^{\I} \land e \in C^{\I}\}$
  \end{itemize}}
  \uncover<6->{
  Interpretation \I is a \alert{model} of
  \only<4-5>{\begin{itemize}
  \item Test
  \item Test
  \end{itemize}}  
  \only<6->{\begin{itemize}
  \item the GCI $\Alert{C\sqsubseteq D}$ iff $C^{\I} \subseteq D^{\I}$, and
  \item the assertion $\Alert{C(a)}$ ($\Alert{r(a,b)}$) iff $a^{\I} \in C^{\I}$ ($(a^{\I},b^{\I}) \in r^{\I}$).
  \end{itemize}}
  }

\uncover<7>{\begin{tikzpicture}[overlay]
    \node[node,label=180:{\tiny $Peter$},label=90:{\tiny \textsc{Consultant}}] (a) at ($(current page.east)+(-2.5,0.2)$) {};
    \node[node,label=0:{\tiny \textsc{Customer}}] (b) at ($(a)+(0.7,-1.1)$) {};
    \node[node,label=270:{\tiny \textsc{CheckingAccount}}] (c) at ($(a)+(-0.5,-2.5)$) {};
    \draw[edge] (a) to node[pos=0.4,right]{\tiny $\mathsf{advises}$} (b);
    \draw[edge] (b) to node[pos=0.5,left]{\tiny $\mathsf{onw\_ca}$} (c);
  \end{tikzpicture}}

\end{frame}
}

\newcommand{\slideThankYou}{%
\begin{frame}[c]
  \begin{center}
    \Large Thank you for your attention!\\[2ex]
    Any questions?
  \end{center}
\end{frame}
}

\newcommand{\slideReferences}{%
\begin{frame}[t,allowframebreaks]
  \frametitle*{References}
  \printbibliography
\end{frame}
}

\colorlet{TB2fg}{hks_44_k_100}
\colorlet{TB1fg}{hks_65_k_100}

\newcommand{\TikzIntuition}{
  \begin{tikzpicture}
    \node[contexts=160] {
      \begin{tikzpicture}
        \node[TB2fg,domain,label={[intlabel,text=TB2fg,inner sep=1pt]120:\llap{$c_{1}$, \textsc{Bank}\,}}] (bank) {%
          \begin{tikzpicture}
            \node[node,label={[intlabel]0:\textsc{Customer}}] (customer) {};
            \node[node,label={[intlabel]0:\smash[b]{\textsc{SavingsAccount}}}, above = 10mm of customer] (sa) {};
            \draw[role] (customer) to[bend right=10,pos=0.4] node[right,intlabel,inner sep=1pt]{own\_sa} (sa);
            \node[node,label={[intlabel]0:\smash[b]{\textsc{MoneyTransfer}}}, below  = 10mm of customer] (mt) {};
            \draw[role] (customer) to[bend left=10] node[right,intlabel]{issues} (mt);
            \node[node,label={[intlabel]180:\textsc{Person}}, left = 2cm of customer] (person) {};
            \draw[role] (person) to[bend left=10] node[above,intlabel]{plays} (customer);
            \node[node,label={[intlabel,xshift=-4mm]90:$\textsc{Transaction'}$}, left = 2cm of mt] (transaction) {};
            \draw[role] (transaction) to[bend left=10] node[pos=0.6,above,intlabel]{plays} (mt);
            \node[node,label={[intlabel]180:\textsc{Account}}, left = 2cm of sa] (account) {};
            \draw[role] (account) to[bend right=5,pos=0.5] node[above,intlabel]{plays} (sa);
          \end{tikzpicture}
        };
        \node[TB2fg,domain, anchor=center,label={[intlabel,text=TB2fg,xshift=-10mm,inner sep=1pt]90:$c_{2}$, \textsc{Transaction}}, 
        right = 5mm of bank, yshift=-5mm] (trans) {%
          \begin{tikzpicture}
            \node[node,label={[intlabel]90:\textsc{Account}}] (acc1) {};
            \node[node,label={[intlabel]90:\textsc{Account}},below = 1cm of acc1] (acc2) {};
            \node[node,label={[intlabel]0:\textsc{Source}},right = 2cm of acc1] (source) {};
            \node[node,label={[intlabel]0:\textsc{Target}},right = 2cm of acc2] (target) {};
            \draw[role] (acc1) to[bend left=10] node[below,intlabel]{plays} (source);
            \draw[role] (acc2) to[bend left=10] node[above,intlabel]{plays} (target);
            \draw[role] (source) to[bend left=10] node[right,intlabel]{trans} (target);
          \end{tikzpicture}
        };
        \draw[role,draw=TB2fg] (bank.20) -| node[intlabel,text=TB2fg,above]{nested} (trans.60);
      \end{tikzpicture}
    };
  \end{tikzpicture}
}

\newcommand{\slideIntuitionLMLO}{%
\begin{frame}
  \frametitle*{Intuition of Contextualized DL \LMLO}
  \only<1>{
    \begin{itemize}
      %\setlength{\itemsep}{1.5ex}
    \item Two-dimensional, two-sorted description logic
    \item \DLouter to describe knowledge \emph{about} contexts (meta level)
    \item \DLinner to describe knowledge \emph{within} contexts (object level)
    \item Contexts $\hat{=}$ possible worlds
    \item Concepts, axioms of object logic are usual \DLinner concepts, axioms
    \item Object axioms used as meta concepts
      \begin{itemize}
      \item $\underbrace{\oax{C\sqsubseteq D}}_{\mathclap{\text{meta concept}}}$ describes set of
        worlds where $\underbrace{\obj{C\sqsubseteq D}}_{\mathclap{\text{object axiom}}}$ holds 
      \end{itemize}
    \end{itemize}
  }
  \only<2-3>{
    \vspace{-5.5mm}
    \begin{align*}
      \meta{\textsc{Bank}} & \meta{\sqsubseteq \oax{\textsc{SavingsAccount}\sqsubseteq\atleast{1}{own\_sa^{-}}{\top}}}\\
      \meta{\textsc{Bank}} & \meta{\sqsubseteq \oax{\exists own\_sa.\top\sqsubseteq\textsc{Customer}}}\\
      \meta{\lnot\oax{(\textsc{Transaction'}\sqcap\exists plays.\top)\sqsubseteq\bot}} & \meta{\sqsubseteq \exists nested.\textsc{Transaction}} 
    \end{align*}
    \vspace*{-4.5mm}
    
    \begin{nomargin}
    \begin{figure}[t]
    \centering
    \uncover<3>{\TikzIntuition}
    \end{figure}
    \end{nomargin}
  }
\end{frame}
}

\newcommand{\slideSyntaxSemanticsLMLO}{%
\begin{frame}
  \frametitle*{\alert<2-5>{Syntax} and \alert<6->{Semantics} of \LMLO}
  %
  \vspace{-1ex}
  
  {\renewcommand{\arraystretch}{1.1}
  \begin{tabularx}{\textwidth}{@{}c@{}CC@{}}
    \only<2-5>{&$\Osig=(\OC,\OR,\OI)$ & $\Msig=(\MC,\MR,\MI)$}%
    \only<6->{&\multicolumn{2}{@{}l}{\alert<6>{Nested interpretation \smash{\JJ}}}} \\
    %
    \only<2-5>{&$\OCR\subseteq\OC$}%
    \only<6->{&\multicolumn{2}{@{}l}{\qquad\textbullet\ $\smash{(\C,\cdot^{\J})}$ DL interpretation on meta level}}\\
    %
    \only<2-5>{&$\ORR\subseteq\OR$}%
    \only<6->{&\multicolumn{2}{@{}l}{\qquad\textbullet\ $\smash{(\Delta,\cdot^{\I_{c}})}$ DL
        interpretation on object level for each possible world}}\\
    %
    \only<6->{&\multicolumn{2}{@{}l}{\qquad\textbullet\ \smash{$x^{\I_{c}} = x^{\I_{d}}$ for all $c,d\in\C$, $x\in\OCR\cup\ORR\cup\OI$}}}
  \end{tabularx}}
  %
  % 

  \vspace*{-2ex}
  {\renewcommand{\arraystretch}{1.1}
  \centering
  \begin{tabular}{@{}r@{ }l@{}}
    \uncover<2->{object concept name} &
      \uncover<2->{\phbracket$A\only<2-5>{\in\OC}\only<6->{\alert<6>{\smash{^{\I_{c}}\subseteq\Delta}}}$}\\
    \uncover<2-7>{object concept}      & 
      \uncover<2->{\phbracket$C\only<7->{\alert<7>{\smash{^{\I_{c}}\subseteq\Delta}}}$%
        \only<2-5>{ (using constructors of \DLinner)}
        \only<7->{ (acc. to semantics of \DLinner)}}\\[1ex]
    %
    \multirow{2}{*}{\only<2>{object axioms}\only<3-7>{\alert<3>{meta concepts}}} 
      & \only<2>{\phbracket$C\sqsubseteq D$}%
        \only<3->{$\alert<3>{\oax{C\sqsubseteq D}}\only<7->{\Alert{\smash{^{\J}\coloneqq \{c\in\C\mid\I_{c}\models C\sqsubseteq D\}}}}$}\\[0.3ex]
      & \only<2>{\phbracket$C(a)$}%
        \only<3->{$\alert<3>{\oax{C(a)}}\only<7->{\Alert{\smash{^{\J}\coloneqq \{c\in\C\mid\I_{c}\models C(a)\}}}}$}\\[0.3ex]
    %
    \uncover<4-7>{meta concept name}   &
      \uncover<4->{\phbracket$B\only<4-5>{\in\MC}\only<6->{\alert<6>{\smash{^{\J}\subseteq\C}}}$}\\
    \uncover<4-7>{meta concept}        & 
      \uncover<4->{\phbracket$E\only<7->{\alert<7>{\smash{^{\J}\subseteq\C}}}$%
        \only<4-5>{ (using constructors of \DLouter)}
        \only<7->{ (acc. to semantics of \DLouter)}}\\
    %
    \multirow{2}{*}{\uncover<4-7>{meta axioms\only<7>{\hspace{2.5em}}}}
      & \uncover<4->{\phbracket$\only<7->{\alert{\mathllap{\J\models\ }}}E\sqsubseteq F$\tikz[baseline]{\node[coord] (c1){\vphantom{b}};}}\\
      & \uncover<4->{\phbracket$\only<7->{\alert{\mathllap{\J\models\ }}}E(c)$}\\[2ex]
    %
      \only<7>{\LMLO ontology\hspace{2.5em}\mbox{}}&
      \uncover<5->{\uncover<5-6>{\llap{\LMLO ontology}}\phbracket$\only<7->{\alert{\mathllap{\J\models\ }}}$\B}%
      \tikz[baseline]{\node[coord] (c2){\vphantom{b}};}%
      \uncover<5>{ \dots conjunction of m-axioms}\\
    \hphantom{Boolean \LMLO knowledge base} &
  \end{tabular}
  }
  \uncover<7->{\alert{\tikz[overlay]{
    \coordinate (a) at ($(c1.north)+(0.1,0)$);
    \coordinate (b) at (c2.south);
    \coordinate (c) at ($(c2.south)+(1,0)$);
    \draw[brace] (a) -- node[right,inner sep=6pt,pos=0.475]{standard entailment relation} ($(b)!(a)!(c)$);
  }}}
\end{frame}
}

\newlength{\diagwidth}

\NewDocumentCommand{\slideComplexityResults}{s}{%
\begin{frame}
  \frametitle*{Complexity of Consistency Problem}

  \begin{changemargin}{-20pt}{-20pt}
    \renewcommand{\arraystretch}{1.25}
    \setlength{\diagwidth}{\widthof{\meta{\ALC{}} -- \meta{\SHOQ}}}
    \begin{tabularx}{1.0\textwidth}[t]{c@{ }clC@{\ }C@{\ }C}
      \toprule
      && \diagbox[width=\diagwidth,height=8mm]{\LM}{\LO}
      & \tikzmark{X1l} \hfill \obj{\EL}    \hfill \tikzmark{X1r}
      & \tikzmark{X2l} \hfill \obj{\ALC{}} -- \obj{\SHOQ} \hfill \tikzmark{X3r}
      & \tikzmark{X4l} \hfill \obj{\SHOIQ} \hfill \tikzmark{X4r}\\
      \midrule \noalign{\hbox{\tikzmark{rawY1}}}
      \multirow{3}{*}{\rotatebox[origin=c]{90}{\textbf{no rigid}}} &
                                                                     \multirow{3}{*}{\rotatebox[origin=c]{90}{\textbf{names}}}
      & \meta{\EL}    & constant \\ \noalign{\hbox{\tikzmark{rawY2}}}
      && \meta{\ALC{}} -- \meta{\SHOQ}   &          \\ \noalign{\hbox{\tikzmark{rawY4}}}
      && \meta{\SHOIQ} &          \\ \noalign{\hbox{\tikzmark{rawY5}}}
      \midrule \noalign{\hbox{\tikzmark{rawY6}}}
      \multirow{3}{*}{\rotatebox[origin=c]{90}{\textbf{only rigid}}} &
                                                                       \multirow{3}{*}{\rotatebox[origin=c]{90}{\textbf{concepts}}}
      & \meta{\EL}    & constant \\ \noalign{\hbox{\tikzmark{rawY7}}}
      && \meta{\ALC{}} -- \meta{\SHOQ}   &          \\ \noalign{\hbox{\tikzmark{rawY9}}}
      && \meta{\SHOIQ} &          \\ \noalign{\hbox{\tikzmark{rawY10}}}
      \midrule \noalign{\hbox{\tikzmark{rawY11}}}
      \multirow{3}{*}{\rotatebox[origin=c]{90}{\textbf{with rigid}}} &
                                                                       \multirow{3}{*}{\rotatebox[origin=c]{90}{\textbf{relations}}} 
      & \meta{\EL}    & constant \\ \noalign{\hbox{\tikzmark{rawY12}}}
      && \meta{\ALC{}} -- \meta{\SHOQ}   &          \\ \noalign{\hbox{\tikzmark{rawY14}}}
      && \meta{\SHOIQ} &          \\ \noalign{\hbox{\tikzmark{rawY15}}}
      \bottomrule
    \end{tabularx}
  \end{changemargin}

  \begin{tikzpicture}[remember picture, overlay,
    % colors for table of complexity results
    ExpTime/.style = {black!8},
    NExpTime/.style = {black!16},
    2ExpTime/.style = {black!24},
    N2ExpTime1/.style = {black!32},
    N2ExpTime2/.style = {black!40},
    theoremSE/.style = {text=black!80, font=\tiny, inner sep = 2pt, anchor = south east},
    theoremNW/.style = {text=black!80, font=\tiny, inner sep = 2pt, anchor = north west},]
    % 
    
    \pgfmathsetmacro{\eps}{0.03}
    % 
    \coordinate (Y1) at ($(rawY1)-(0,\eps)$);
    \coordinate (Y2) at ($(rawY2)-(0,\eps)$);
    %\coordinate (Y3) at ($(rawY3)+(0,0)$);
    \coordinate (Y4a) at ($(rawY4)+(0,\eps)$);
    \coordinate (Y4b) at ($(rawY4)-(0,\eps)$);
    \coordinate (Y5) at ($(rawY5)+(0,\eps)$);
    \fill[ExpTime] (X2l|-Y1) -- (X2l|-Y2) -- (X1l|-Y2) -- (X1l|-Y4a) -- (X3r|-Y4a) -- (X3r|-Y1) -- cycle;
    \fill[NExpTime] (X4l|-Y1) -- (X4l|-Y4b) -- (X1l|-Y4b) -- (X1l|-Y5) -- (X4r|-Y5) -- (X4r|-Y1) -- cycle;
    \node[font=\beamersmall] at ($0.5*(X1l|-Y4b)+0.5*(X3r|-Y2)+(0.9,0.2)$) {\ExpTime-complete};
    \IfBooleanTF{#1}{%
      \node[align=center,font=\beamersmall] at ($0.5*(X4l|-Y5)+0.5*(X4r|-Y1)+(0.5,0)$) {\NExpTime-\\complete};
    }{%
      \node[align=center,font=\beamersmall] at ($0.5*(X4l|-Y5)+0.5*(X4r|-Y1)+(0.0,0)$) {\NExpTime-complete};
    }
    % 
    \coordinate (Y6) at ($(rawY6)-(0,\eps)$);
    \coordinate (Y7) at ($(rawY7)-(0,\eps)$);
    %\coordinate (Y8) at ($(rawY8)+(0,0)$);
    \coordinate (Y10) at ($(rawY10)+(0,\eps)$);
    \fill[NExpTime] (X2l|-Y6) -- (X2l|-Y7) -- (X1l|-Y7) -- (X1l|-Y10) -- (X3r|-Y10) -- (X3r|-Y6) -- cycle;
    \fill[N2ExpTime1] (X4l|-Y6) -- (X4l|-Y10) -- (X4r|-Y10) -- (X4r|-Y6) -- cycle;
    \node[font=\beamersmall] at ($0.5*(X1l|-Y10)+0.5*(X3r|-Y7)+(0.5,-0.0)$) {\NExpTime-complete};
    \node[align=center,font=\beamersmall] at ($0.5*(X4l|-Y6)+0.5*(X4r|-Y10)$) {\NExpTime-hard\\ and\\ in \TwoNExpTime};
    % 
    \coordinate (Y11) at ($(rawY11)-(0,\eps)$);
    \coordinate (Y12) at ($(rawY12)-(0,\eps)$);
    %\coordinate (Y13) at ($(rawY13)+(0,0)$);
    \coordinate (Y14a) at ($(rawY14)+(0,\eps)$);
    \coordinate (Y14b) at ($(rawY14)-(0,\eps)$);
    \coordinate (Y15) at ($(rawY15)+(0,\eps)$);
    \fill[2ExpTime] (X2l|-Y11) -- (X2l|-Y15) -- (X3r|-Y15) -- (X3r|-Y11) -- cycle;
    \fill[NExpTime] (X1l|-Y12) -- (X1l|-Y15) -- (X1r|-Y15) -- (X1r|-Y12) -- cycle;
    \fill[N2ExpTime2] (X4l|-Y11) -- (X4l|-Y15) -- (X4r|-Y15) -- (X4r|-Y11) -- cycle;
    \node[align=center,font=\beamersmall] at ($0.5*(X1l|-Y15)+0.5*(X1r|-Y12)$) {\NExpTime-\\complete};
    \node[align=center,font=\beamersmall] at ($0.5*(X2l|-Y15)+0.5*(X3r|-Y11)$) {\TwoExpTime-\\complete};
    \node[align=center,font=\beamersmall] at ($0.5*(X4l|-Y11)+0.5*(X4r|-Y15)$) {\TwoExpTime-hard\\ and\\
      in \TwoNExpTime};
    %
    \IfBooleanTF{#1}{
      \node[crom,label={[font=\tiny, label distance=6pt,text=hks_44_k_100,rounded corners=0pt, inner
        sep=0pt]90:CROM}] at ($0.5*(X4l|-Y5)+0.5*(X4r|-Y1)+(-0.4,0)$) {};
    }{}
  \end{tikzpicture}
\end{frame}
}

\newcommand{\slideUpperBoundsLMLO}{%
\begin{frame}
  \frametitle*{Upper Bounds for \LMLO}
  \setbeamercovered{transparent}
  Idea: Split consistency problem into two separate decision problems
  \begin{itemize}
  \item \alert<1>{\emph{Outer consistency}}\uncover<2->{ with \X}
  \item \alert<2>{\emph{Admissibility}}\uncover<2->{ of \X}
  \end{itemize}

  \only<1-2>{
    \vspace{0mm}
    \uncover<1>{Check whether meta level is consistent.}\\
    \uncover<2>{Check whether the induced o-axioms are consistent.}
    
    \begin{minipage}[c]{0.49\linewidth}
      \begin{align*}
        \B_{ex} & = \meta{C\sqsubseteq \oax{A(a)}}\\
                & \land \meta{(C\sqcap\oax{A\sqsubseteq\bot})(d)} \\
                & \land \meta{(\exists r.\oax{A\sqsubseteq\bot})(d)}\\[2ex]
        \uncover<2>{\X} & \uncover<2>{= \underbrace{\{\emptyset,\{\oax{A(a)}\},
                          \{\oax{A\sqsubseteq\bot}\}\}}_{\alert{\{\oax{A(a)},\oax{A\sqsubseteq\bot}\}}\notin\X}}
      \end{align*}
    \end{minipage}
    \begin{minipage}[c]{0.49\linewidth}
      \centering
      \begin{tikzpicture}
        \node[contexts=100,minimum width=3.5cm] at (0,0){
          \begin{tikzpicture}
            \node[node,label={[nominwidth,inner sep=0pt,align=left]
              270:\only<1>{\meta{$C$},\\ $\meta{A_{\oax*{A\sqsubseteq\bot}}}$,\\ $\meta{A_{\oax*{A(a)}}}$}%
                  \only<2>{\meta{$C$},\\ $\meta{\oax{A\sqsubseteq\bot}}$,\\ $\meta{\oax{A(a)}}$}},
            label={[nominwidth,inner sep=0pt]135:$d$}] (a) at (0,0){};
            \node[node,label={[nominwidth,inner sep=0pt]
              270:\only<1>{$\meta{A_{\oax*{A\sqsubseteq\bot}}}$}\only<2>{$\oax{A\sqsubseteq\bot}$}}] (b) at (1.5,0){};
            \draw[edge](a) to[bend left=15] node[nominwidth,above,mylabel]{$r$} (b);
          \end{tikzpicture}
        };
        \only<1>{\node[text=alertcolor,font=\huge,minimum width=8mm] at (2.5,0) {\cmark};}
        \only<2>{\node[text=Alertcolor,font=\huge,minimum width=8mm] at (2.5,0) {\xmark};}
      \end{tikzpicture}
    \end{minipage}
  }
  \only<3>{
    \begin{lemma}
      The \LMLO ontology~$\Bmc$ is consistent iff there is a set \Xmc such that
      \begin{enumerate}
      \item \Xmc is admissible, and
      \item the outer abstraction of \Bmc is outer consistent w.r.t.~\Xmc.
      \end{enumerate}
    \end{lemma}
  }
\end{frame}
}


\newcommand{\slideMapping}{%
\begin{frame}
  \frametitle*{Automated Mapping}

  \vspace*{-3mm}
  
  \begin{tabularx}{\linewidth}{@{}llX}
    Objective:                 & \multicolumn{2}{l}{Given a CROM \Mmc, construct an ontology $\Omc_{\Mmc}$ s.t.}\\
                               & \multicolumn{2}{l}{\quad $\Omc_{\Mmc}$ consistent iff \Mmc satisfiable}\\[1ex]
    \uncover<2->{General idea: & \textbullet\ Compartment types        & $\rightsquigarrow$ meta concepts\\
                               & \textbullet\ Natural types            & $\rightsquigarrow$ (rigid) object concepts\\
                               & \textbullet\ Fields of natural types  & $\rightsquigarrow$ (rigid) object DL roles\\}
    \uncover<6->{              & \textbullet\ Role Types               & $\rightsquigarrow$ (non-rigid) object concepts\\
                               & \textbullet\ plays-relation           & $\rightsquigarrow$ (non-rigid) object DL role\\
                               & \textbullet\ Relationship types       & $\rightsquigarrow$ (non-rigid) object DL roles\\
                               & \textbullet\ Occurrence constraints   & $\rightsquigarrow$ object
                                                                         individual $\delta$, DL
                                                                         role \hspace*{5mm} `counting'\\[1ex]}
    \uncover<7>{Constraints:   & \textbullet\ without constraints      & $\rightsquigarrow$ \con{\ALC}{\ALCIQ}\\
                               & \textbullet\ with occurrence constraints & $\rightsquigarrow$ \con{\ALC}{\ALCOIQ} \\
                               & \textbullet\ full                     & $\rightsquigarrow$ \con{\ALC}{\SHOIQ}\\[1ex]
                               & \textbullet\ current version of CROM  & $\rightsquigarrow$ no rigid DL roles
                               needed\\
                               & \textbullet\ additional constraints based \\
                               & \quad on fields of natural type &
                               \multirow{-2}{*}{$\rightsquigarrow$ rigid roles needed!}
    }
  \end{tabularx}

  \begin{tikzpicture}[remember picture, overlay]
    \uncover<3-5>{\node[domain,minimum height=1.9cm,anchor=north west] (dom) at ($(current page.center)+(-2,-1)$) {
      \begin{tikzpicture}
        \node[node, label={[nominheight,label distance=0mm,xshift=-3mm,align=left,anchor=south
          west,rounded corners=0pt]
          \only<3,5>{\textsc{Person}}%
          \only<4>{\textsc{Person},\\\textsc{Consultant}}}] (obj) at (0,0) {};
        \node[node, label={[nominheight,label distance=0mm,font=\beamersmall]180:\textit{Peter}},
          left = 2cm of obj,yshift=3mm] (name) {};
        \node[node, label={[nominheight,label distance=0mm,font=\beamersmall]180:\textsc{BankClerk}},
          left = 2cm of obj,yshift=-5mm] (prof) {};
        \node[node, label={[nominheight,label distance=0mm,font=\beamersmall]180:35},
          left = 2cm of obj,yshift=-1mm] (age) {};
        %
        \draw[edge] (obj) to[bend right=10] node[pos=0.9,nominheight,font=\beamersmall,
          anchor=south west]{name} (name);
        \draw[edge] (obj) to[bend right=10] node[pos=0.9,nominheight,font=\beamersmall,
          anchor=south west]{age} (age);
        \draw[edge] (obj) to[bend right=10] node[pos=0.8,nominheight,font=\beamersmall,
          anchor=175]{profession} (prof);
        %
        \only<5>{
          \node[node,label={[nominheight,label distance=0mm,xshift=-3mm,align=left,anchor=south
            west,rounded corners=0pt]\textsc{Consultant}}] (role) at (2,0) {};
          \draw[edge] (obj) to[bend right=15] node[nominsize,below]{plays} (role);
        }
      \end{tikzpicture}
    };}
  \uncover<3-5>{\draw[thin] ($(dom.west)+(-0.3,-1.7)$) -- ($(dom.west)+(-0.3,1.7)$);}
  \uncover<3-5>{\tikzNatural{person}{$(dom.west)+(-1.7,-1)$}{1.5cm}{Person}{\beamersmall name\\ age\\[-1ex]
      profession}{}}
  \uncover<3-5>{\tikzRole{cons}{$(person)+(0,2)$}{1cm}{Consultant}{}
    \tikzFills{(person)}{(cons)}}
  \end{tikzpicture}   
\end{frame}
}


\newcommand{\slideMappingExample}{%
\begin{frame}
  \frametitle*{Example of Mapping}

  \hspace*{-8mm}
  \begin{tikzpicture}
    %\grid{(0,0)}{(10,5)}
    %
    \tikzNatural{person}{1,1}{1.5cm}{Person}{\beamersmall name\\ age\\[-1ex] profession}{}
    \tikzNatural{comp}{3,1}{1.5cm}{Company}{}{}
    \tikzNatural{acc}{8.8,3}{1.5cm}{Account}{}{}
    %
    \tikzContext{bank}{3.3,4}{0cm}{Bank}{
      \tikzRole{cons}{0.3,3}{1cm}{Consultant}{1..*}
      \tikzRole{cus}{0.3,1.12}{1cm}{Customer}{\only<1-4>{0..*}\only<5>{\textbf{\alert{\footnotesize 1..*}}}}
      \tikzRole{monTra}{4,3}{1cm}{MoneyTransfer}{0..*}
      \tikzRoleGroup{rg1}{4,1}{BankAccounts (1..1)}{
        \tikzRole{ca}{0,0.6}{1cm}{CheckingAccount}{}
        \tikzRole{sa}{0,0}{1cm}{SavingsAccount}{}
      }{1..*}
    }
    \tikzContext{transaction}{8.8,5}{0cm}{Transaction}{
      \tikzRoleGroup{rg2}{0,0}{Participants (1..1)}{
        \tikzRole{source}{0,0}{1cm}{Source}{}
        \tikzRole{target}{3,0}{1cm}{Target}{}
      }{1..1}
    }
    %
    \tikzFillsV{(person)}{(cus)}{0.4}
    \tikzFillsV{(comp)}{(cus)}{0.4}
    % \tikzFillsH{(person.180)}{(cons.180)}{-0.2}
    \tikzFills{(transaction)}{(monTra)}
    \tikzFills{(acc)}{(rg1)}
    \tikzFills{(acc)}{(rg2)}
    \draw[-triangle 60,thick] (person) -| ($(person)!0.5!(cons)+(-1.1,0)$) |- (cons);
    % 
    \tikzRST{(source)}{(target)}{1..1}{trans}{1..1}{0.1}{above}{0.9}
    \tikzRST{($(cons.south)+(-0.5,0)$)}{($(cus.north)+(-0.5,0)$)}{0..*}{advises}{1..*}
      {0.2}{right}{0.8} 
    \tikzRSTH{(cus.15)}{(monTra)}{1..1}{issues}{1..*}{shorten <=-3pt}
    \tikzRST{(cus.0)}{(ca)}{1..1}{own\_ca}{0..*}{0.1}{above}{0.8}
    \tikzRSTH{(cus.345)}{(sa)}{1..*}{own\_sa}{0..*}{shorten <=-3pt}
    % 
    %
    %
    \tikzNatural[legendgray]{nt}{8.5,1.7}{1.3cm}{\beamersmall Natural Type}{}{}
    \tikzContext[legendgray]{ct}{8.5,0.7}{1.0cm}{\beamersmall Compartment Type}{
      \tikzRole[legendgray]{rt}{0,0}{5mm}{\beamersmall Role Type}{Card}
    }
    \tikzRoleGroup[legendgray]{rg}{10.5,0.5}{\beamersmall Rolegroup (m..n)}{
      \node{\smash{\hphantom{testtestte}}};
    }{}
    \coordinate (a) at (9.7,1.7);
    \coordinate (b) at (10.1,1.7);
    \draw[legendgray,thin, -triangle 60] (a) -- (b);
    \node[legendgray] at (10.7,1.7){\beamersmall Fills-Relation};
    \coordinate (c) at (9.7,1.2);
    \coordinate (d) at (11.3,1.2);
    \tikzRST[legendgray]{(c)}{(d)}{CardM}{RST}{CardN}{0.15}{above}{0.85}
  \end{tikzpicture}

  \begin{tikzpicture}[remember picture, overlay]
    \uncover<2->{
      \node[fill=white,minimum width=8cm, minimum height=6cm, anchor=north east] (block) at
      ($(current page.center)+(6,2)$) {
        $\begin{aligned}
          \uncover<2->{
            \meta{\top} & \meta{\sqsubseteq\oax{\textsc{Consultant}\sqcup\textsc{Customer} \sqsubseteq
                \exact{1}{\mathsf{counting}^{-}}{\{\delta\}}}} \\
            \meta{\textsc{Bank}} & \meta{ \sqsubseteq
              \oax{(\atleast{1}{\mathsf{counting}}{\textsc{Consultant}})(\delta)}}\\[1ex] 
          }
          \uncover<3->{
            \meta{\textsc{Bank}} & \meta{\sqsubseteq\oax{\top\sqsubseteq\forall.advises.\textsc{Customer}}}\\
            \meta{\textsc{Bank}} & \meta{\sqsubseteq
              \oax{\textsc{Consultant}\sqsubseteq\atleast{1}{\mathsf{advises}}{\top}}}\\
          }
          \uncover<5>{
            &\hspace*{2.5cm}\mathclap{\rule{6cm}{0.5pt}}\\
            \meta{Bank} & \meta{ \sqsubseteq
              \oax{(\atleast{1}{\mathsf{counting}}{\textsc{Customer}})(\delta)}}
          }
          %
          \\[20ex]
          \uncover<1>{blub}
        \end{aligned}$
      };
      \fill[white,path fading=west]
      ($(block.south west)+(0.05,0)$) rectangle ($(block.north west)+(-1,0)$);}
  \end{tikzpicture}

  \begin{tikzpicture}[remember picture, overlay]
    \coordinate (O) at ($(current page.center)+(2,-2.7)$);
    \uncover<2->{
      \node[domain,label={[intlabel,text=TB2fg,inner sep=1pt]120:\llap{$c_{1}$, \textsc{Bank}\,}}]
      (dom) at (O) {%
        \begin{tikzpicture}
          \node[node,label={[intlabel]$\delta$}] (delta) at (0,0) {};
          \node[node,label={[intlabel]270:\textsc{Consultant}}] (consultant) at (-2,-1) {};
          \draw[edge](delta) to[bend right=5]
            node[intlabel,anchor=south east,font=\beamersmall]{counting} (consultant);
          \uncover<4->{
            \node[node,label={[intlabel]270:\textsc{Customer}}] (customer) at (2,-1) {};
            \draw[edge] (consultant) to[bend right=5] node[above,intlabel]{advises} (customer);
            \draw[edge](delta) to[bend left=5]
              node[intlabel,anchor=south west,font=\beamersmall]{counting} (customer);
          }
        \end{tikzpicture}
      };
    }
  \end{tikzpicture}
\end{frame}
}

\endinput

%%% TeX-master: verteidigung